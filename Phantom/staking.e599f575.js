(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
!function(){function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},a=n.parcelRequire1d24;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},n.parcelRequire1d24=a),a.register("egHtJ",(function(t,n){e(t.exports,"PHANTOM_STAKE_NODE",(function(){return o})),e(t.exports,"SOL_STAKING_DOCS",(function(){return a("f5UU6").SOL_STAKING_DOCS})),e(t.exports,"SOL_STAKING_REWARDS_DOCS",(function(){return a("f5UU6").SOL_STAKING_REWARDS_DOCS})),e(t.exports,"createStakingHooks",(function(){return a("j4jBF").createStakingHooks})),e(t.exports,"StakeAccountType",(function(){return a("jjhma").StakeAccountType})),e(t.exports,"calculateTotalValidatorAPY",(function(){return a("8lo7S").calculateTotalValidatorAPY})),e(t.exports,"recommendedValidatorSorter",(function(){return a("kAm35").recommendedValidatorSorter})),e(t.exports,"createStakeAnalytics",(function(){return a("8B6ZJ").createStakeAnalytics})),e(t.exports,"useGetMaxTransferrableSol",(function(){return a("czeP8").useGetMaxTransferrableSol})),e(t.exports,"stakingShouldDehydrateQueryPredicate",(function(){return a("fMZSj").stakingShouldDehydrateQueryPredicate}));a("f5UU6");a("hvyP7");a("j4jBF"),a("jjhma");a("9OqWg");a("8lo7S"),a("kAm35"),a("8B6ZJ"),a("czeP8"),a("d5USZ");a("bX8dN");a("5HQUf"),a("fMZSj");const o={identityPublicKey:"7GkMBmtrTZz8QbjSe1sXvAUtz7Pp42SQxfT5ymmJD4We",voteAccountPublicKey:"J2nUHEAgZFRyuJbFjdqPrAa9gyWDuc7hErtDQHPhsYRp"}})),a.register("f5UU6",(function(t,n){e(t.exports,"CONFIG_PROGRAM_ID",(function(){return u})),e(t.exports,"SOL_STAKING_DOCS",(function(){return c})),e(t.exports,"SOL_STAKING_REWARDS_DOCS",(function(){return d})),e(t.exports,"NETWORK_TO_NATIVE_FUNGIBLE",(function(){return f}));var o=a("iOvk1"),r=a("5slFC"),i=a("hMVEP"),s=a("RVqnc");const u=new(0,i.PublicKey)("Config1111111111111111111111111111111111111"),c="https://docs.solana.com/staking",d="https://docs.solana.com/implemented-proposals/staking-rewards",l={type:r.FungibleTokenType.SolanaNative,data:{amount:"0",balance:new(0,s.BigNumber)(0),chain:{id:o.Chains.solana.mainnetID,imageUrl:o.Chains.solana.iconUrl,name:o.Chains.solana.name,symbol:o.Chains.solana.tokenSymbol},coingeckoId:"solana",decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:r.SpamStatus.NotVerified}},f=new Map([[o.NetworkIDs.Solana.Mainnet,l]])})),a.register("hvyP7",(function(t,n){e(t.exports,"createStakingHooks",(function(){return a("j4jBF").createStakingHooks}));a("j4jBF")})),a.register("j4jBF",(function(t,n){e(t.exports,"createStakingHooks",(function(){return T}));var o=a("7gANb"),r=a("5ZOeC"),i=a("lEqf0"),s=a("6fWI5"),u=a("6Bfdh"),c=a("48Z1Q"),d=a("39pK6"),l=a("gqfgW"),f=a("3cJgq"),p=a("d5USZ"),y=a("40bAw"),k=a("8BkVZ"),g=a("kETlb"),v=a("FEhzp"),S=a("cJRQS"),h=a("efxv4"),m=a("1C4N1"),b=a("fcYa8"),A=a("8YG4F"),P=a("8i0cM"),w=a("kFx26");function T({analytics:e,accountSigner:t,accountHooks:n,storage:a,legacyStorage:T,fungiblesSdk:x,priceHooks:I,transactionHooks:C,queryClient:E,getApiEnvironment:N,stakeAnalytics:D}){const M=new(0,o.PriorityFeeService);return{useKeybaseUserAvatar:e=>(0,u.useKeybaseUserAvatar)(e),useRecommendedValidators:()=>(0,c.useRecommendedValidators)(N),useSignatureStatus:(e,t,n)=>(0,d.useSignatureStatus)(E,e,t,n),useStakeAccounts:f.useStakeAccounts,useStakeAccountMinBalance:l.useStakeAccountMinBalance,useStakeActivationData:p.useStakeActivationData,useStakeApy:()=>(0,y.useStakeApy)(N),useStakeRewardsHistory:(e,t)=>(0,k.useStakeRewardsHistory)(N,e,t),useValidators:v.useValidators,useValidatorInfo:g.useValidatorInfo,useVoteAccounts:S.useVoteAccounts,useConvertStakeAccountReviewPageProps:e=>(0,b.useConvertStakeAccountReviewPageProps)({accountHooks:n,priceHooks:I,navigateToStatusPage:e}),useConvertStakeAccountListPageProps:e=>(0,m.useConvertStakeAccountListPageProps)({accountHooks:n,transactionHooks:C,navigateToReviewPage:e}),useLiquidStakingStatusPageProps:o=>(0,P.useLiquidStakingStatusPageProps)(Object.assign(Object.assign({},o),{analytics:e,accountSigner:t,accountHooks:n,storage:a,legacyStorage:T,fungiblesSdk:x,transactionHooks:C,queryClient:E,getApiEnvironment:N})),useConvertStakeBannerProps:e=>(0,A.useConvertStakeBannerProps)(Object.assign(Object.assign({},e),{accountHooks:n,transactionHooks:C,getApiEnvironment:N})),useNativeLiquidStaking:e=>(0,w.useNativeLiquidStaking)(N,e),useDelegateStake:e=>(0,s.useDelegateStake)(C,e,E,M,D),useCreateStakeAccountAndDelegateStake:e=>(0,r.useCreateStakeAccountAndDelegateStake)(C,e,E,M,D),useDeactivateStake:e=>(0,i.useDeactivateStake)(C,e,E,M,D),useWithdrawStake:e=>(0,h.useWithdrawStake)(C,e,E,M,D)}}})),a.register("5ZOeC",(function(t,n){e(t.exports,"useCreateStakeAccountAndDelegateStake",(function(){return g}),(function(e){return g=e}));var o=a("iOvk1"),r=a("43063"),i=a("7mQ3Y"),s=a("hMVEP"),u=a("csW2r"),c=a("7gANb"),d=a("9W7fs"),l=a("3vaB1");a("9OqWg");var f=a("hIkt0"),p=a("6fWI5"),y=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function k({lamports:e,votePubkey:t,authorizedPubkey:n}){const[o,r]=function({ownerPublicKey:e,lamports:t,transaction:n=new(0,s.Transaction)}){const o=s.Keypair.generate();return n.add(s.StakeProgram.createAccount({fromPubkey:e,stakePubkey:o.publicKey,authorized:new(0,s.Authorized)(e,e),lamports:t})),[n,o]}({ownerPublicKey:n,lamports:e});return o.add((0,p.delegateStake)({stakePubkey:r.publicKey,authorizedPubkey:n,votePubkey:t})),[o,r]}const g=(e,t,n,a,p)=>{const{t:g}=(0,r.useTranslation)(),{mutateAsync:v}=e.useSignAndSendSolanaTransactionAsync(t);return(0,d.useMutation)({mutationFn:e=>y(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,lamports:r,votePubkey:u,authorizedPubkey:d,usdPerSol:f}){if(!n)throw l.MissingSenderAddressError;const{networkID:y,address:S}=n,[h,m]=k({accountIdentifier:e,senderAddress:n,lamports:r,votePubkey:u,authorizedPubkey:d}),b=yield a.addPriorityFee(h,{connection:t}),A={ownerAddress:null!=S?S:"",networkID:y,data:{signature:""},type:c.PendingTransactionType.CreateAccountAndDelegateStake,display:{summary:{topLeft:{label:g("transactionsPendingCreatingAndDelegatingStake")}}}};p.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(y),type:"delegate"})));const P=yield v({accountIdentifier:e,feePayer:new(0,s.PublicKey)(S),transaction:b,pendingTransactionInput:A,opts:{additionalSignerAccounts:[m]}});p.then((e=>e.submittedTransaction(P,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(y),method:"signAndSendTransaction"})));const w=(0,s.lamportsToSolana)(r),T=f?w.times(f):void 0;return p.then((e=>e.createStakeAccountAndDelegateStake({sol:w.toNumber(),usd:null==T?void 0:T.toNumber(),voteAccountPubkey:u}))),{networkID:y,id:null!=P?P:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{p.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,f.invalidateAllStakeAccountData)(n)()})).catch((t=>{p.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("3vaB1",(function(t,n){e(t.exports,"MissingSenderAddressError",(function(){return o})),e(t.exports,"MissingConfirmationSignatureError",(function(){return r})),e(t.exports,"MissingPublicKeyError",(function(){return a})),e(t.exports,"StakingErrorCodes",(function(){return i})),e(t.exports,"StakingError",(function(){return u}));const o=new Error("Missing sender address for staking fungibles."),r=(new Error("Missing signature from staking fungibles."),new Error("Missing signature from waiting for staking transaction confirmation.")),a=new Error("PublicKey is required");var i,s;(s=i||(i={})).NoProviderError="NoProviderError",s.NoConvertDetailsError="NoConvertDetailsError",s.UnknownError="UnknownError",s.FailedToConfirmTransaction="FailedToConfirmTransaction";class u extends Error{constructor(e){super(e)}}})),a.register("9OqWg",(function(t,n){e(t.exports,"calculateTotalValidatorAPY",(function(){return a("8lo7S").calculateTotalValidatorAPY})),e(t.exports,"invalidateAllStakeAccountData",(function(){return a("hIkt0").invalidateAllStakeAccountData})),e(t.exports,"recommendedValidatorSorter",(function(){return a("kAm35").recommendedValidatorSorter}));a("8lo7S"),a("hIkt0"),a("kAm35"),a("9TG0W")})),a.register("8lo7S",(function(n,o){e(n.exports,"calculateTotalValidatorAPY",(function(){return i}));var r=a("kAKNF");function i(e,n){const o=new(t(r))(e/100),a=new(t(r))(n/100);return o.minus(o.times(a)).times(100).decimalPlaces(2).toNumber()}})),a.register("hIkt0",(function(t,n){e(t.exports,"invalidateAllStakeAccountData",(function(){return r}));var o=a("7dNLn");const r=e=>()=>{e.invalidateQueries({predicate:e=>!!o.STAKE_ACCOUNTS_SCOPE.every(((t,n)=>e.queryKey[n]===t))||o.STAKE_ACTIVATION_DATA_SCOPE.every(((t,n)=>e.queryKey[n]===t))})}})),a.register("7dNLn",(function(t,n){e(t.exports,"STAKE_ACCOUNTS_SCOPE",(function(){return r})),e(t.exports,"STAKE_ACTIVATION_DATA_SCOPE",(function(){return a})),e(t.exports,"LIQUID_STAKING_QUERY_KEYS_PREFIX",(function(){return i})),e(t.exports,"stakingQueryKeys",(function(){return u}));const o="staking",r=[o,"stakeAccounts"],a=[o,"stakeActivationData"];var i,s;(s=i||(i={})).convertStakeList="convertStakeAccountList",s.supportedTokens="liquidStakingSupportedTokens";const u={keybaseUserAvatar:e=>[o,"keybaseUserAvatar",e],signatureStatus:e=>[o,"signatureStatus",e],stakeAccounts:(e,t)=>[...r,e,t],stakeAccountMinBalance:()=>[o,"stakeAccountMinBalance"],stakeActivationData:e=>[...a,e],stakeRewardsHistory:e=>[o,"stakeRewardsHistory",e],stakeApy:()=>[o,"stakeApy"],recommendedValidators:()=>[o,"recommendedValidators"],validatorInfo:()=>[o,"validatorInfo"],voteAccounts:e=>[o,"voteAccounts",e],convertStakeAccountList:(e,t)=>[o,i.convertStakeList,e,t],liquidStakingSupportedTokens:e=>[o,i.supportedTokens,e]}})),a.register("kAm35",(function(t,n){e(t.exports,"recommendedValidatorSorter",(function(){return o}));const o=e=>(t,n)=>{const o=e.indexOf(t.voteAccountPubkey),r=e.indexOf(n.voteAccountPubkey);return(o>-1?o:1/0)-(r>-1?r:1/0)}})),a.register("9TG0W",(function(t,n){e(t.exports,"voteAccountSorter",(function(){return r}));const o=(e,t)=>e+t[1],r=(e,t)=>{if(e.commission>50||t.commission>50)return e.commission-t.commission;const n=e.epochCredits.reduce(o,0)*(1-e.commission/100);return t.epochCredits.reduce(o,0)*(1-t.commission/100)-n}})),a.register("6fWI5",(function(t,n){e(t.exports,"delegateStake",(function(){return y}),(function(e){return y=e})),e(t.exports,"useDelegateStake",(function(){return k}),(function(e){return k=e}));var o=a("iOvk1"),r=a("43063"),i=a("7mQ3Y"),s=a("hMVEP"),u=a("csW2r"),c=a("7gANb"),d=a("9W7fs"),l=a("3vaB1");a("9OqWg");var f=a("hIkt0"),p=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function y({stakePubkey:e,authorizedPubkey:t,votePubkey:n}){return s.StakeProgram.delegate({stakePubkey:e,authorizedPubkey:t,votePubkey:n})}const k=(e,t,n,a,k)=>{const{t:g}=(0,r.useTranslation)(),{mutateAsync:v}=e.useSignAndSendSolanaTransactionAsync(t);return(0,d.useMutation)({mutationFn:e=>p(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,stakePubkey:r,authorizedPubkey:u,votePubkey:d}){if(!n)throw l.MissingSenderAddressError;const{networkID:f,address:p}=n,S=y({stakePubkey:r,authorizedPubkey:u,votePubkey:d}),h=yield a.addPriorityFee(S,{connection:t}),m={ownerAddress:null!=p?p:"",networkID:f,data:{signature:""},type:c.PendingTransactionType.DelegateStake,display:{summary:{topLeft:{label:g("transactionsPendingDelegatingStake")}}}};k.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(f),type:"delegate"})));const b=yield v({accountIdentifier:e,feePayer:new(0,s.PublicKey)(p),transaction:h,pendingTransactionInput:m});return k.then((e=>e.submittedTransaction(b,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(f),method:"signAndSendTransaction"}))),{networkID:f,id:null!=b?b:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{k.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,f.invalidateAllStakeAccountData)(n)()})).catch((t=>{k.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("lEqf0",(function(t,n){e(t.exports,"useDeactivateStake",(function(){return y}),(function(e){return y=e}));var o=a("iOvk1"),r=a("43063"),i=a("7mQ3Y"),s=a("hMVEP"),u=a("csW2r"),c=a("7gANb"),d=a("9W7fs"),l=a("3vaB1");a("9OqWg");var f=a("hIkt0"),p=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const y=(e,t,n,a,y)=>{const{t:k}=(0,r.useTranslation)(),{mutateAsync:g}=e.useSignAndSendSolanaTransactionAsync(t);return(0,d.useMutation)({mutationFn:e=>p(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,stakePubkey:r,stakeAuthorityPubkey:u,authorizedPubkey:d}){if(!n)throw l.MissingSenderAddressError;const{networkID:f,address:p}=n,v=function({stakePubkey:e,stakeAuthorityPubkey:t,authorizedPubkey:n,transaction:o=new(0,s.Transaction)}){return t.equals(n)||o.add(s.StakeProgram.authorize({authorizedPubkey:n,newAuthorizedPubkey:n,stakeAuthorizationType:s.StakeAuthorizationLayout.Staker,stakePubkey:e})),o.add(s.StakeProgram.deactivate({stakePubkey:e,authorizedPubkey:n})),o}({stakePubkey:r,stakeAuthorityPubkey:u,authorizedPubkey:d}),S=yield a.addPriorityFee(v,{connection:t}),h={ownerAddress:null!=p?p:"",networkID:f,data:{signature:""},type:c.PendingTransactionType.DeactivateStake,display:{summary:{topLeft:{label:k("transactionsPendingDeactivatingStake")}}}};y.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(f),type:"undelegate"})));const m=yield g({accountIdentifier:e,feePayer:new(0,s.PublicKey)(p),transaction:S,pendingTransactionInput:h});return y.then((e=>e.submittedTransaction(m,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(f),method:"signAndSendTransaction"}))),y.then((e=>e.deactivateStake())),{networkID:f,id:null!=m?m:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{y.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,f.invalidateAllStakeAccountData)(n)()})).catch((t=>{y.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("6Bfdh",(function(t,n){e(t.exports,"useKeybaseUserAvatar",(function(){return u}),(function(e){return u=e}));var o=a("5ekp2"),r=a("5SMLK"),i=a("7dNLn"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const u=e=>{const t=i.stakingQueryKeys.keybaseUserAvatar(e);return(0,o.useQuery)({enabled:!!e,queryKey:t,queryFn(){return s(this,void 0,void 0,(function*(){if(!e)throw new Error("Keybase username is required");return(0,r.getKeybaseUserAvatar)(e)}))},placeholderData:""})}})),a.register("5SMLK",(function(t,n){e(t.exports,"getKeybaseUserAvatar",(function(){return i}),(function(e){return i=e}));var o=a("beWYh"),r=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const i=e=>r(void 0,void 0,void 0,(function*(){var t;const n=yield o.rb.get(`https://keybase.io/_/api/1.0/user/pic_url.json?username=${encodeURIComponent(e)}`);if(!(0,o.responseIsOkay)(n)||0!==(null===(t=n.data.status)||void 0===t?void 0:t.code))throw new Error("Couldn't fetch keybase user avatar");return n.data.pic_url}))})),a.register("48Z1Q",(function(t,n){e(t.exports,"useRecommendedValidators",(function(){return d}),(function(e){return d=e}));var o=a("csW2r"),r=a("5ekp2"),i=a("5u9SD"),s=a("7dNLn"),u=a("kX9T3"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const d=e=>{const t=s.stakingQueryKeys.recommendedValidators();return(0,r.useQuery)({enabled:!0,queryKey:t,cacheTime:u.CacheTime.Long,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return(0,i.getRecommendedValidators)(e())}))},onError(e){o.telemetry.captureError(e,o.FeatureTag.Staking)}})}})),a.register("5u9SD",(function(t,n){e(t.exports,"getRecommendedValidators",(function(){return u}),(function(e){return u=e}));var o=a("beWYh"),r=a("jjhma"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch recommended staking validators.");function u(e){return i(this,void 0,void 0,(function*(){try{const t=yield o.rb.get(`${e}/staking/v1/recommended`);if(!(0,o.responseIsOkay)(t))throw s;const n=t.data;return r.RecommendedValidators.parse(n).validators}catch(e){throw s}}))}})),a.register("jjhma",(function(t,n){e(t.exports,"StakeAccountType",(function(){return o})),e(t.exports,"StakeApy",(function(){return u})),e(t.exports,"RecommendedValidators",(function(){return c})),e(t.exports,"StakingRewardsHistory",(function(){return l})),e(t.exports,"LiquidStakingSupportedTokens",(function(){return g}));var o,r,i=a("iOvk1"),s=a("7XqVB");(r=o||(o={})).Initialized="initialized",r.Delegated="delegated";const u=s.z.object({apy:s.z.number()}),c=s.z.object({validators:s.z.array(s.z.string())}),d=s.z.object({epoch:s.z.number(),effectiveSlot:s.z.number(),amount:s.z.number(),postBalance:s.z.number(),percentChange:s.z.number(),apr:s.z.number(),timestamp:s.z.number()}),l=s.z.object({items:s.z.array(d)}),f=s.z.object({address:s.z.string(),chainId:i.NetworkID,decimals:s.z.number(),logoURI:s.z.string(),name:s.z.string(),symbol:s.z.string()}),p=s.z.object({caip19:s.z.string(),metadata:f}),y=s.z.object({vote_account:s.z.string()}),k=s.z.object({apy:s.z.string(),chainId:i.NetworkID,convertRatio:s.z.string(),name:s.z.string(),stakePoolAddress:s.z.string(),stakePoolTokenMetadata:p,validators:s.z.array(y)}),g=s.z.record(s.z.string(),s.z.array(k))})),a.register("kX9T3",(function(t,n){e(t.exports,"CacheTime",(function(){return r})),e(t.exports,"StaleTime",(function(){return s}));var o=a("RVqnc");var r,i,s,u;(i=r||(r={}))[i.Always=1/0]="Always",i[i.Short=(0,o.toMilliseconds)({days:1})]="Short",i[i.Medium=(0,o.toMilliseconds)({days:3})]="Medium",i[i.Long=(0,o.toMilliseconds)({days:7})]="Long",(u=s||(s={}))[u.Immediate=0]="Immediate",u[u.Short=(0,o.toMilliseconds)({minutes:1})]="Short",u[u.Medium=(0,o.toMilliseconds)({minutes:2.5})]="Medium",u[u.Long=(0,o.toMilliseconds)({minutes:5})]="Long",u[u.Never=1/0]="Never"})),a.register("39pK6",(function(t,n){e(t.exports,"useSignatureStatus",(function(){return c}),(function(e){return c=e}));var o=a("5ekp2"),r=a("3vaB1"),i=a("7dNLn"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const u=(e,t)=>s(void 0,void 0,void 0,(function*(){return yield e.getSignatureStatus(t,{searchTransactionHistory:!0})}));function c(e,t,n,a){var c;const d=i.stakingQueryKeys.signatureStatus(a),l=e.getQueryData(d),f=null===(c=null==l?void 0:l.value)||void 0===c?void 0:c.confirmationStatus,p=!!a&&"finalized"!==f;return(0,o.useQuery)({queryKey:d,queryFn:()=>s(this,void 0,void 0,(function*(){if(!a)throw r.MissingConfirmationSignatureError;return yield u(t,a)})),enabled:p,refetchInterval:n})}})),a.register("gqfgW",(function(t,n){e(t.exports,"useStakeAccountMinBalance",(function(){return c}),(function(e){return c=e}));var o=a("hMVEP"),r=a("5ekp2"),i=a("7dNLn"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const u=e=>()=>s(void 0,void 0,void 0,(function*(){return yield e.getMinimumBalanceForRentExemption(o.StakeProgram.space)}));function c(e){const t=i.stakingQueryKeys.stakeAccountMinBalance(),n=u(e);return(0,r.useQuery)({queryKey:t,queryFn:n,placeholderData:0})}})),a.register("3cJgq",(function(t,n){e(t.exports,"useStakeAccounts",(function(){return f}),(function(e){return f=e}));var o=a("hMVEP"),r=a("csW2r"),i=a("5ekp2"),s=a("7dNLn"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const c=(e,t)=>u(void 0,void 0,void 0,(function*(){const n=[];t.ownerPublicKey&&n.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&n.push({dataSize:200},{memcmp:{offset:124,bytes:t.voteAccountPublicKey}});const a=yield e.getParsedProgramAccounts(o.StakeProgram.programId,{filters:n});let i=[];if(t.fetchInflationRewards)try{i=yield((e,t,n,...o)=>u(void 0,[e,t,n,...o],void 0,(function*(e,t,n,o="confirmed"){return yield e.getInflationReward(t,n,o)})))(e,a.map((({pubkey:e})=>e)))}catch(e){const t=e;!t.message.includes("RPC request timed out")&&r.telemetry.captureError(t,r.FeatureTag.Staking)}return a.map(((e,t)=>{var n;return Object.assign({pubkey:e.pubkey.toString(),lamports:e.account.lamports,inflationReward:null===(n=i[t])||void 0===n?void 0:n.amount},e.account.data.parsed)}))})),d=(e,t)=>s.stakingQueryKeys.stakeAccounts(e,t),l=(e,t)=>()=>c(e,{ownerPublicKey:t,fetchInflationRewards:!0});function f(e,t){const n=d(t,e.rpcEndpoint),o=l(e,t);return(0,i.useQuery)({queryKey:n,queryFn:o,placeholderData:[]})}})),a.register("d5USZ",(function(t,n){e(t.exports,"getStakeActivationData",(function(){return c}),(function(e){return c=e})),e(t.exports,"useStakeActivationData",(function(){return d}),(function(e){return d=e}));var o=a("hMVEP"),r=a("5ekp2"),i=a("3vaB1"),s=a("7dNLn"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const c=(e,t)=>e.getStakeActivation(new(0,o.PublicKey)(t));function d(e,t){const n=s.stakingQueryKeys.stakeActivationData(t),o=!!t;return(0,r.useQuery)({queryKey:n,queryFn:()=>u(this,void 0,void 0,(function*(){if(!t)throw i.MissingPublicKeyError;return yield c(e,t)})),enabled:o})}})),a.register("40bAw",(function(t,n){e(t.exports,"useStakeApy",(function(){return d}),(function(e){return d=e}));var o=a("csW2r"),r=a("5ekp2"),i=a("9Kma9"),s=a("7dNLn"),u=a("kX9T3"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const d=e=>{const t=s.stakingQueryKeys.stakeApy();return(0,r.useQuery)({enabled:!0,queryKey:t,cacheTime:u.CacheTime.Short,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return(0,i.getStakingApy)(e())}))},onError(e){o.telemetry.captureError(e,o.FeatureTag.Staking)}})}})),a.register("9Kma9",(function(t,n){e(t.exports,"getStakingApy",(function(){return u}),(function(e){return u=e}));var o=a("beWYh"),r=a("jjhma"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch staking APY");function u(e){return i(this,void 0,void 0,(function*(){try{const t=yield o.rb.get(`${e}/staking/v1/apy`);if(!(0,o.responseIsOkay)(t))throw s;const n=t.data;return r.StakeApy.parse(n).apy}catch(e){throw s}}))}})),a.register("8BkVZ",(function(t,n){e(t.exports,"useStakeRewardsHistory",(function(){return d}),(function(e){return d=e}));var o=a("csW2r"),r=a("wGjeD"),i=a("1xomf"),s=a("7dNLn"),u=a("kX9T3"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function d(e,t,n,a=2){const d=s.stakingQueryKeys.stakeRewardsHistory(t);return(0,r.useInfiniteQuery)({retry:a,enabled:!!t&&!!n,queryKey:d,cacheTime:u.CacheTime.Long,staleTime:u.StaleTime.Never,queryFn:o=>c(this,[o],void 0,(function*({pageParam:o}){const r=o?{address:t,chainId:n,epoch:o}:{address:t,chainId:n};return(0,i.getStakingRewardsHistory)(e(),r)})),getNextPageParam:({items:e})=>e.length?e[e.length-1].epoch:null,onError:e=>o.telemetry.captureError(e,o.FeatureTag.Staking)})}})),a.register("wGjeD",(function(t,n){e(t.exports,"useInfiniteQuery",(function(){return s}));var o=a("6BSmi"),r=a("iKKzk"),i=a("dsciT");function s(e,t,n){const a=(0,r.parseQueryArgs)(e,t,n);return(0,i.useBaseQuery)(a,o.InfiniteQueryObserver)}})),a.register("6BSmi",(function(t,n){e(t.exports,"InfiniteQueryObserver",(function(){return i}));var o=a("3Pyfv"),r=a("cccYE");class i extends o.QueryObserver{bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,r.infiniteQueryBehavior)()},t)}getOptimisticResult(e){return e.behavior=(0,r.infiniteQueryBehavior)(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var n,o,a,i,s,u;const{state:c}=e;return{...super.createResult(e,t),fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,r.hasNextPage)(t,null==(n=c.data)?void 0:n.pages),hasPreviousPage:(0,r.hasPreviousPage)(t,null==(o=c.data)?void 0:o.pages),isFetchingNextPage:"fetching"===c.fetchStatus&&"forward"===(null==(a=c.fetchMeta)||null==(i=a.fetchMore)?void 0:i.direction),isFetchingPreviousPage:"fetching"===c.fetchStatus&&"backward"===(null==(s=c.fetchMeta)||null==(u=s.fetchMore)?void 0:u.direction)}}constructor(e,t){super(e,t)}}})),a.register("cccYE",(function(t,n){function o(){return{onFetch:e=>{e.fetchFn=()=>{var t,n,o,i,s,u;const c=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,d=null==(o=e.fetchOptions)||null==(i=o.meta)?void 0:i.fetchMore,l=null==d?void 0:d.pageParam,f="forward"===(null==d?void 0:d.direction),p="backward"===(null==d?void 0:d.direction),y=(null==(s=e.state.data)?void 0:s.pages)||[],k=(null==(u=e.state.data)?void 0:u.pageParams)||[];let g=k,v=!1;const S=e.options.queryFn||(()=>Promise.reject("Missing queryFn")),h=(e,t,n,o)=>(g=o?[t,...g]:[...g,t],o?[n,...e]:[...e,n]),m=(t,n,o,r)=>{if(v)return Promise.reject("Cancelled");if(void 0===o&&!n&&t.length)return Promise.resolve(t);const a={queryKey:e.queryKey,pageParam:o,meta:e.meta};var i;i=a,Object.defineProperty(i,"signal",{enumerable:!0,get:()=>{var t,n;return null!=(t=e.signal)&&t.aborted?v=!0:null==(n=e.signal)||n.addEventListener("abort",(()=>{v=!0})),e.signal}});const s=S(a);return Promise.resolve(s).then((e=>h(t,o,e,r)))};let b;if(y.length)if(f){const t=void 0!==l,n=t?l:r(e.options,y);b=m(y,t,n)}else if(p){const t=void 0!==l,n=t?l:a(e.options,y);b=m(y,t,n,!0)}else{g=[];const t=void 0===e.options.getNextPageParam;b=!c||!y[0]||c(y[0],0,y)?m([],t,k[0]):Promise.resolve(h([],k[0],y[0]));for(let n=1;n<y.length;n++)b=b.then((o=>{if(!c||!y[n]||c(y[n],n,y)){const a=t?k[n]:r(e.options,o);return m(o,t,a)}return Promise.resolve(h(o,k[n],y[n]))}))}else b=m([]);return b.then((e=>({pages:e,pageParams:g})))}}}}function r(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function a(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}function i(e,t){if(e.getNextPageParam&&Array.isArray(t)){const n=r(e,t);return null!=n&&!1!==n}}function s(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){const n=a(e,t);return null!=n&&!1!==n}}e(t.exports,"infiniteQueryBehavior",(function(){return o})),e(t.exports,"hasNextPage",(function(){return i})),e(t.exports,"hasPreviousPage",(function(){return s}))})),a.register("1xomf",(function(t,n){e(t.exports,"getStakingRewardsHistory",(function(){return u}),(function(e){return u=e}));var o=a("beWYh"),r=a("jjhma"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch staking rewards history");function u(e,t){return i(this,void 0,void 0,(function*(){let n;try{n=yield o.rb.post(`${e}/staking/v1/history`,t)}catch(e){throw s}if(!(0,o.responseIsOkay)(n))throw s;const a=n.data,i=r.StakingRewardsHistory.safeParse(a);if(i.success)return i.data;throw s}))}})),a.register("kETlb",(function(t,n){e(t.exports,"useValidatorInfo",(function(){return c}),(function(e){return c=e}));var o=a("5ekp2"),r=a("f5UU6"),i=a("7dNLn"),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const u=e=>()=>s(void 0,void 0,void 0,(function*(){return(yield e.getParsedProgramAccounts(r.CONFIG_PROGRAM_ID)).reduce(((e,t)=>{var n;if("validatorInfo"!==(null===(n=t.account.data.parsed)||void 0===n?void 0:n.type))return e;const o=t.pubkey.toString(),r=t.account.data.parsed.info.keys,[,a]=r;if(!a.signer)return e;const i=a.pubkey,s=t.account.data.parsed.info.configData;return e.push({identityPubkey:i,infoPubkey:o,info:s}),e}),[])}));function c(e){const t=i.stakingQueryKeys.validatorInfo(),n=u(e);return(0,o.useQuery)({queryKey:t,queryFn:n,placeholderData:[]})}})),a.register("FEhzp",(function(t,n){e(t.exports,"useValidators",(function(){return c}),(function(e){return c=e}));var o=a("29o0l"),r=a("9TG0W"),i=a("kETlb"),s=a("cJRQS"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function c(e){const{isFetched:t,isFetching:n,isLoading:a,isSuccess:c,isError:d,dataUpdatedAt:l,errorUpdatedAt:f,error:p,refetch:y,data:k}=(0,s.useVoteAccounts)(e),g=Math.max(l,f),{isFetched:v,isFetching:S,isLoading:h,isSuccess:m,isError:b,dataUpdatedAt:A,errorUpdatedAt:P,error:w,refetch:T,data:x}=(0,i.useValidatorInfo)(e),I=Math.max(A,P),C=Math.max(g,I),E=t&&v,N=n||S,D=c||m,M=d||b,L=p||w,O=a||h,K=(0,o.useCallback)((()=>u(this,void 0,void 0,(function*(){Promise.all([y(),T()])}))),[T,y]);return{results:(0,o.useMemo)((()=>{if(!k)return[];if(!x)return[];k.sort(r.voteAccountSorter);const e=new Map(k.map((e=>[e.identityPubkey,e]))),t=new Map(x.map((e=>[e.identityPubkey,e]))),n=[];for(const[o,r]of e){const e=t.get(o);n.push(Object.assign(Object.assign({},r),e))}return n}),[x,k]),dataUpdatedAt:C,error:L,isSuccess:D,isError:M,isFetched:E,isFetching:N,isLoading:O,refetch:K}}})),a.register("cJRQS",(function(t,n){e(t.exports,"useVoteAccounts",(function(){return u}),(function(e){return u=e}));var o=a("5ekp2"),r=a("7dNLn"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=e=>i(void 0,void 0,void 0,(function*(){const t=yield e.getVoteAccounts();return[...t.current,...t.delinquent].map((e=>({identityPubkey:e.nodePubkey,voteAccountPubkey:e.votePubkey,commission:e.commission,lastVote:e.lastVote,epochCredits:e.epochCredits,activatedStake:e.activatedStake}))).filter((e=>e.commission<99))}));function u(e){const t=r.stakingQueryKeys.voteAccounts(e.rpcEndpoint);return(0,o.useQuery)({queryKey:t,queryFn:()=>i(this,void 0,void 0,(function*(){return s(e)})),placeholderData:[]})}})),a.register("efxv4",(function(t,n){e(t.exports,"useWithdrawStake",(function(){return y}),(function(e){return y=e}));var o=a("iOvk1"),r=a("43063"),i=a("7mQ3Y"),s=a("hMVEP"),u=a("csW2r"),c=a("7gANb"),d=a("9W7fs"),l=a("3vaB1");a("9OqWg");var f=a("hIkt0"),p=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const y=(e,t,n,a,y)=>{const{t:k}=(0,r.useTranslation)(),{mutateAsync:g}=e.useSignAndSendSolanaTransactionAsync(t);return(0,d.useMutation)({mutationFn:e=>p(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,stakePubkey:r,authorizedPubkey:u,amount:d}){if(!n)throw l.MissingSenderAddressError;const{networkID:f,address:p}=n,v=function({stakePubkey:e,authorizedPubkey:t,amount:n,transaction:o=new(0,s.Transaction)}){return o.add(s.StakeProgram.withdraw({stakePubkey:e,authorizedPubkey:t,toPubkey:t,lamports:n})),o}({stakePubkey:r,authorizedPubkey:u,amount:d}),S=yield a.addPriorityFee(v,{connection:t}),h={ownerAddress:null!=p?p:"",networkID:f,data:{signature:""},type:c.PendingTransactionType.WithdrawStake,display:{summary:{topLeft:{label:k("transactionsPendingWithdrawingStake")}}}};y.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(f),type:"withdraw"})));const m=yield g({accountIdentifier:e,feePayer:new(0,s.PublicKey)(p),transaction:S,pendingTransactionInput:h});return y.then((e=>e.submittedTransaction(m,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(f),method:"signAndSendTransaction"}))),{networkID:f,id:null!=m?m:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{y.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,f.invalidateAllStakeAccountData)(n)()})).catch((t=>{y.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:o.Chain.Solana,networkId:o.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("1C4N1",(function(t,n){e(t.exports,"useConvertStakeAccountListPageProps",(function(){return l}));var o=a("4xbAj"),r=a("7mQ3Y"),i=a("29o0l"),s=a("liNiM"),u=a("FEhzp");a("bX8dN");var c=a("5HQUf"),d=a("jjhma");const l=({accountHooks:e,transactionHooks:t,navigateToReviewPage:n})=>{var o;const{connection:a}=t.useSelectedSolanaConnection(),{data:d}=e.useSelectedChainAddress(r.AddressType.Solana),{results:l,isFetched:p,isError:y}=(0,u.useValidators)(a),k=(0,i.useMemo)((()=>new Map(l.map((e=>[e.voteAccountPubkey,e])))),[l]),{data:g,isLoading:v}=(0,s.useConvertStakeAccountList)(a,null!==(o=null==d?void 0:d.address)&&void 0!==o?o:"",k,p||y),S=(0,i.useMemo)((()=>v||!g?[]:g.slice().map((e=>f(e,k))).sort(((e,t)=>e.lamports>t.lamports?-1:1))),[v,g,k]),h=(0,i.useMemo)((()=>S.filter((e=>e.eligible))),[S]),m=(0,i.useMemo)((()=>S.filter((e=>!e.eligible))),[S]),b=(0,c.useLiquidStakingStore)((e=>e.setConvertStakeAccount)),A=(0,i.useCallback)((e=>{var t,o,r,a,i,s,u,c;const d=null!==(a=null===(r=null===(o=null===(t=null==e?void 0:e.info)||void 0===t?void 0:t.stake)||void 0===o?void 0:o.delegation)||void 0===r?void 0:r.voter)&&void 0!==a?a:"",l=null!==(c=null===(u=null===(s=null===(i=null==e?void 0:e.info)||void 0===i?void 0:i.stake)||void 0===s?void 0:s.delegation)||void 0===u?void 0:u.stake)&&void 0!==c?c:"0";b({validatorVote:d,amount:l,stakeAccount:e.pubkey}),n()}),[n,b]);return{isLoading:v,eligibleStakeAccounts:h,inelegibleStakeAccounts:m,onSelectStakeAccount:A}},f=(e,t)=>{const n=p(e),o=y(e,t),r=k(e);return Object.assign(Object.assign({},e),{amount:r,eligible:n,title:o,imageUri:e.imageUri})},p=e=>e.type!==d.StakeAccountType.Initialized&&"active"===e.activationState,y=(e,t)=>{var n,r,a;let i="";if(e.type===d.StakeAccountType.Delegated){const{voter:s}=e.info.stake.delegation,u=t.get(s),c=null===(n=null==u?void 0:u.info)||void 0===n?void 0:n.keybaseUsername,d=null===(r=null==u?void 0:u.info)||void 0===r?void 0:r.name;i=null!==(a=null!=d?d:c)&&void 0!==a?a:(0,o.formatHashMedium)(s)}else e.type===d.StakeAccountType.Initialized&&(i=e.pubkey);return i},k=e=>{if(e.type===d.StakeAccountType.Initialized)return e.lamports;const{stake:t}=e.info.stake.delegation;return Number(t)}})),a.register("liNiM",(function(t,n){e(t.exports,"useConvertStakeAccountList",(function(){return f}),(function(e){return f=e}));var o=a("hMVEP"),r=a("5ekp2"),i=a("5SMLK"),s=a("7dNLn"),u=a("d5USZ"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const d=(e,t)=>s.stakingQueryKeys.convertStakeAccountList(e,t),l=(e,t,n)=>()=>((e,t,n)=>c(void 0,void 0,void 0,(function*(){const r=(e=>{const t=[];return e.ownerPublicKey&&t.push({memcmp:{offset:44,bytes:e.ownerPublicKey}}),e.voteAccountPublicKey&&t.push({dataSize:200},{memcmp:{offset:124,bytes:e.voteAccountPublicKey}}),t})(t),a=yield e.getParsedProgramAccounts(o.StakeProgram.programId,{filters:r}),s=(yield Promise.allSettled(a.map((t=>(0,u.getStakeActivationData)(e,t.pubkey.toString()))))).map((e=>{if("fulfilled"===e.status)return e.value.state})),c=(yield Promise.allSettled(a.map((e=>{var t,o,r;const a=null===(t=e.account.data.parsed.info)||void 0===t?void 0:t.stake.delegation.voter,s=n.get(a),u=null===(o=null==s?void 0:s.info)||void 0===o?void 0:o.keybaseUsername,c=null===(r=null==s?void 0:s.info)||void 0===r?void 0:r.iconUrl;return c?new Promise((e=>e(c))):u?(0,i.getKeybaseUserAvatar)(u):new Promise((e=>e(null)))})))).map((e=>{if("fulfilled"===e.status&&null!==e.value)return e.value}));return a.map(((e,t)=>Object.assign({pubkey:e.pubkey.toString(),lamports:e.account.lamports,activationState:s[t],imageUri:c[t]},e.account.data.parsed)))})))(e,{ownerPublicKey:t},n);function f(e,t,n,o=!0){const a=d(t,e.rpcEndpoint),i=l(e,t,n);return(0,r.useQuery)({queryKey:a,queryFn:i,enabled:!!t&&o})}})),a.register("bX8dN",(function(t,n){e(t.exports,"useLiquidStakingStore",(function(){return a("5HQUf").useLiquidStakingStore}));a("5HQUf")})),a.register("5HQUf",(function(n,o){e(n.exports,"useLiquidStakingStore",(function(){return s}));var r=a("gTwcH");const i={fungibleToStake:void 0,provider:void 0,convert:{validatorVote:"",stakeAccount:"",amount:""},eligibleAccountsCount:0,navigateTo:null},s=t(r)((e=>Object.assign(Object.assign({},i),{resetStaking:()=>e(i),setFungibleToStake:t=>e({fungibleToStake:t}),setProvider:t=>e({provider:t}),setConvertStakeAccount:t=>e({convert:t}),setEligibleAccountsCount:t=>e({eligibleAccountsCount:t}),setNavigateTo:t=>e({navigateTo:t})})))})),a.register("fcYa8",(function(t,n){e(t.exports,"useConvertStakeAccountReviewPageProps",(function(){return y}));var o=a("iOvk1"),r=a("5slFC"),i=a("43063"),s=a("7mQ3Y"),u=a("kram9"),c=a("RVqnc"),d=a("29o0l");a("bX8dN");var l=a("5HQUf");const f=(e,t,n,a)=>{var s,d;if(!t||!n||!e)return null;const l=((e,t,n)=>{if(!t||!n||!e)return(0,c.BigNumber)(0);const o=new(0,c.BigNumber)(t.amount),r=new(0,c.BigNumber)(n.convertRatio);return(0,c.amountToUiAmount)(o,e.data.decimals).div(r)})(e,n,t),f=(0,u.extractPrice)(e,a),p=(null==f?void 0:f.usd)?l.multipliedBy(f.usd):l;return{amount:(0,u.formatTokenAmountGreaterThan1)(l),amountUsd:`$${(0,u.formatTokenAmountGreaterThan1)(p)}`,border:!1,network:{id:null!==(s=t.stakePoolTokenMetadata.metadata.chainId)&&void 0!==s?s:o.SolanaNetworkID.Mainnet,name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},logoUri:null!==(d=t.stakePoolTokenMetadata.metadata.logoURI)&&void 0!==d?d:null,symbol:t.stakePoolTokenMetadata.metadata.symbol,title:i.i18next.t("convertStakeReviewYouReceive"),tokenAddress:t.stakePoolTokenMetadata.metadata.address,tokenType:r.FungibleTokenType.SPL}},p=(e,t,n,o,a)=>{var s,l;const p=(0,d.useMemo)((()=>((e,t,n)=>{var o,a;if(!e||!t)return null;const s=(0,c.amountToUiAmount)(t.amount,e.data.decimals),d=(0,u.extractPrice)(e,n),l=(null==d?void 0:d.usd)?s.multipliedBy(d.usd):null;return{amount:(0,u.formatTokenAmountGreaterThan1)(s),amountUsd:l?`$${(0,u.formatTokenAmountGreaterThan1)(l)}`:"",border:!1,logoUri:null!==(o=e.data.logoUri)&&void 0!==o?o:null,network:{id:e.data.chain.id,name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},symbol:e.data.symbol,tokenAddress:e.data.tokenAddress,tokenType:null!==(a=e.type)&&void 0!==a?a:r.FungibleTokenType.SolanaNative,title:i.i18next.t("convertStakeReviewYouPay")}})(e,t,a)),[e,t,a]),y=(0,d.useMemo)((()=>f(e,n,t,a)),[e,n,t,a]),k=null!==(s=null==n?void 0:n.name)&&void 0!==s?s:"";return{payAsset:p,receiveAsset:y,account:null!==(l=null==o?void 0:o.address)&&void 0!==l?l:"",providerName:k,apy:void 0!==(null==n?void 0:n.apy)?(0,c.formatPercentage)(Number.parseFloat(n.apy)):"",networkFee:"",accountLabelText:i.i18next.t("stakeReviewAccount"),providerLabelText:i.i18next.t("convertStakeReviewProvider"),apyLabelText:i.i18next.t("stakeReviewAPY"),networkFeeLabelText:i.i18next.t("convertStakeReviewNetworkFee"),primaryButtonText:i.i18next.t("commandConvert")}},y=({accountHooks:e,priceHooks:t,navigateToStatusPage:n})=>{const a=(0,l.useLiquidStakingStore)((e=>e.fungibleToStake)),i=(0,l.useLiquidStakingStore)((e=>e.convert)),u=(0,l.useLiquidStakingStore)((e=>e.provider)),c=(0,d.useMemo)((()=>{var e;const t=[],n=a?(0,r.getFungibleCaip19FromFungible)(a):void 0,i=(0,o.decodeCaip19)(null!==(e=null==u?void 0:u.stakePoolTokenMetadata.caip19)&&void 0!==e?e:"");return n&&i&&(t.push(n),t.push(i)),{query:{data:t}}}),[a,u]),{data:f}=t.usePrices(c),{data:y}=e.useSelectedChainAddress(s.AddressType.Solana),k=p(a,i,u,y,f),g=(0,d.useCallback)((()=>{n()}),[n]);return Object.assign(Object.assign({},k),{onPrimaryButtonPress:g})}})),a.register("8YG4F",(function(t,n){e(t.exports,"useConvertStakeBannerProps",(function(){return c}));var o=a("43063"),r=a("7mQ3Y"),i=a("29o0l"),s=a("3cJgq"),u=a("i6CYo");const c=({fungible:e,accountHooks:t,transactionHooks:n,goToConvertStake:a,getApiEnvironment:c})=>{var d;const{connection:l}=n.useSelectedSolanaConnection(),{data:f}=t.useSelectedChainAddress(r.AddressType.Solana),{data:p=[],isLoading:y}=(0,s.useStakeAccounts)(l,null!==(d=null==f?void 0:f.address)&&void 0!==d?d:""),{isLoading:k,isSupported:g,initConvertStake:v}=(0,u.useLiquidStaking)(c,e),S=!(y||k)&&g&&p.length>0,h=(0,i.useCallback)((()=>{v(),a()}),[v,a]);return{title:o.i18next.t("convertStakeBannerTitle"),canConvertStake:S,onPress:h}}})),a.register("i6CYo",(function(t,n){e(t.exports,"useLiquidStaking",(function(){return c}));var o=a("iOvk1"),r=a("5slFC"),i=a("29o0l"),s=a("66NgB");a("bX8dN");var u=a("5HQUf");const c=(e,t)=>{const n=(0,u.useLiquidStakingStore)((e=>e.setProvider)),a=(0,u.useLiquidStakingStore)((e=>e.setFungibleToStake)),c=(0,i.useMemo)((()=>t?(0,o.encodeCaip19)((0,r.getFungibleCaip19FromFungible)(t)):""),[t]),{data:d={},isLoading:l}=(0,s.useLiquidStakingSupportedTokens)(e),f=d[c],p=(0,i.useCallback)((()=>{const e=f?f[0]:void 0;e&&t&&(a(t),n(e))}),[t,f,a,n]);return{isLoading:l,isSupported:(null==f?void 0:f.length)>0,providers:f,initConvertStake:p}}})),a.register("66NgB",(function(t,n){e(t.exports,"useLiquidStakingSupportedTokens",(function(){return d}),(function(e){return d=e}));var o=a("csW2r"),r=a("5ekp2"),i=a("bqBHl"),s=a("7dNLn"),u=a("kX9T3"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const d=e=>{const t=s.stakingQueryKeys.liquidStakingSupportedTokens(e());return(0,r.useQuery)({queryKey:t,cacheTime:u.CacheTime.Short,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return yield(0,i.getLiquidStakingSupportedTokens)(e())}))},onError(e){o.telemetry.captureError(e,o.FeatureTag.Staking)}})}})),a.register("bqBHl",(function(t,n){e(t.exports,"getLiquidStakingSupportedTokens",(function(){return c}),(function(e){return c=e}));var o=a("beWYh"),r=a("jjhma"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch liquid staking supported tokens"),u=new Error("Missing supported tokens in response");function c(e){return i(this,void 0,void 0,(function*(){try{const t=yield o.rb.get(`${e}/liquid-staking/v1/supported-tokens`);if(!(0,o.responseIsOkay)(t))throw s;const n=r.LiquidStakingSupportedTokens.safeParse(t.data.supportedTokens);if(!n.success)throw u;return n.data}catch(e){throw s}}))}})),a.register("8i0cM",(function(t,n){e(t.exports,"useLiquidStakingStatusPageProps",(function(){return y}),(function(e){return y=e}));var o=a("5slFC"),r=a("43063"),i=a("7gANb"),s=a("29o0l"),u=a("3vaB1"),c=a("4EJiy");a("bX8dN");var d=a("5HQUf"),l=a("7umtj"),f=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const p="https://www.jito.network/defi/";const y=({analytics:e,accountSigner:t,accountHooks:n,storage:a,legacyStorage:y,fungiblesSdk:k,transactionHooks:g,queryClient:v,getApiEnvironment:S,dismissConvertFlow:h,goToConvertAccountList:m})=>{var b,A,P;const{t:w}=(0,r.useTranslation)(),[T,x]=(0,s.useState)("loading"),[I,C]=(0,s.useState)(),[E,N]=(0,s.useState)(),D=(0,d.useLiquidStakingStore)((e=>e.fungibleToStake)),M=(0,d.useLiquidStakingStore)((e=>e.provider)),L=(0,d.useLiquidStakingStore)((e=>e.convert)),O=(0,d.useLiquidStakingStore)((e=>e.eligibleAccountsCount)),K=(0,d.useLiquidStakingStore)((e=>e.resetStaking)),F=(0,d.useLiquidStakingStore)((e=>e.setNavigateTo)),q=null!==(b=null==D?void 0:D.data.symbol)&&void 0!==b?b:"",R=null!==(A=null==M?void 0:M.stakePoolTokenMetadata.metadata.symbol)&&void 0!==A?A:"",{data:V,isLoading:_}=n.useSelectedMultiChainAccount(),j=null!==(P=null==V?void 0:V.identifier)&&void 0!==P?P:"",W=(0,s.useMemo)((()=>{var e,t;const n=(null!==(e=null==V?void 0:V.addresses)&&void 0!==e?e:[]).find((e=>e.networkID===(null==D?void 0:D.data.chain.id)));return null!==(t=null==n?void 0:n.address)&&void 0!==t?t:""}),[null==D?void 0:D.data.chain.id,null==V?void 0:V.addresses]),{fungible:z,isLoadingTokens:U}=(0,o.useGetFungibleBalance)({key:(null==M?void 0:M.stakePoolTokenMetadata.metadata.address)||"",analytics:e,sdk:k,getApiEnvironment:S,storage:a,legacyStorage:y,accountHooks:n,transactionHooks:g,queryClient:v}),B=z?(0,o.parseOwnerAddress)(z):void 0,{connection:Q}=(0,i.useSelectedSolanaConnection)(n),{mutateAsync:H}=(0,c.useConvertStakeAccount)({accountSigner:t,connection:Q,storage:a}),Y=(0,s.useMemo)((()=>({topLeft:{label:w("convertStakePendingTitle",{symbol:R})}})),[R,w]),G=!_||!U,Z=(0,s.useCallback)((()=>f(void 0,void 0,void 0,(function*(){if(!M)throw new(0,u.StakingError)(u.StakingErrorCodes.NoProviderError);if(!L)throw new(0,u.StakingError)(u.StakingErrorCodes.NoConvertDetailsError);try{const e=yield H({stakePoolAddress:M.stakePoolAddress,accountIdentifier:j,ownerAddress:W,validatorVoteAddress:L.validatorVote,stakeAccountAddress:L.stakeAccount,poolTokenAccountAddress:B,pendingConvertStakeActivityRow:Y});C(e)}catch(e){const t=(0,l.parseStakingError)(e);N(t)}}))),[j,L,H,W,Y,B,M]),{isSuccess:X,isError:J,error:$}=g.useWaitForTransactionConfirmation(K,I);(0,s.useEffect)((()=>{X?x("confirmed"):J&&(x("error"),N($))}),[X,J,$,I]);const ee=(0,s.useCallback)((()=>{var e;if(!I||J)return h();F(z?{screen:"FungibleDetail",type:z.type,networkID:z.data.chain.id,fungibleKey:z.data.key,name:null!==(e=z.data.name)&&void 0!==e?e:""}:{screen:"Activity"}),h()}),[I,J,z,h,F]),te=(0,s.useMemo)((()=>function({stakedTokenSymbol:e,poolTokenSymbol:t,txHash:n,txError:o,confirmationStatus:r,eligibleAccountsCount:a,onDismiss:i,onConvertMore:s,t:u}){return o?{type:"error",title:u("convertStakeStatusErrorTitle"),message:u("convertStakeStatusErrorMessage",{poolTokenSymbol:t}),txHash:n,txHashTitle:u("commandViewTransaction"),button:{title:u("commandClose"),onPress:i}}:"confirmed"===r?{type:"success",title:u("convertStakeStatusSuccessTitle",{poolTokenSymbol:t}),learnMoreLink:p,txHash:n,txHashTitle:u("commandViewTransaction"),continueButton:a>1?{title:u("convertStakeStatusConvertMore"),onPress:s}:void 0,closeButton:{title:u("commandClose"),onPress:i}}:{type:"loading",title:u("convertStakeStatusLoadingTitle",{poolTokenSymbol:t}),message:u("convertStakeStatusLoadingMessage",{stakedTokenSymbol:e,poolTokenSymbol:t}),txHash:n,txHashTitle:u("commandViewTransaction"),button:{title:u("commandClose"),onPress:i}}}({stakedTokenSymbol:q,poolTokenSymbol:R,txHash:null==I?void 0:I.id,txError:E,confirmationStatus:T,eligibleAccountsCount:O,onDismiss:ee,onConvertMore:m,t:w})),[q,R,null==I?void 0:I.id,E,T,O,ee,m,w]);return{isReadyToExecute:G,statusPageProps:te,executeConvertStake:Z}}})),a.register("4EJiy",(function(t,n){e(t.exports,"useConvertStakeAccount",(function(){return d}),(function(e){return d=e}));var o=a("iOvk1"),r=a("hMVEP"),i=a("7gANb"),s=a("9W7fs");a("ls3Bv");var u=a("aye90"),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const d=({accountSigner:e,connection:t,storage:n})=>(0,s.useMutation)({mutationFn:a=>c(void 0,[a],void 0,(function*({stakePoolAddress:a,accountIdentifier:s,ownerAddress:c,validatorVoteAddress:d,stakeAccountAddress:l,poolTokenAccountAddress:f,pendingConvertStakeActivityRow:p}){const{transaction:y,signers:k}=yield(0,u.getConvertStakeAccountTransaction)({connection:t,stakePoolAddress:a,ownerAddress:c,validatorVoteAddress:d,stakeAccountAddress:l,poolTokenAccountAddress:f}),g={ownerAddress:c,networkID:o.Chains.solana.mainnetID,data:{signature:""},type:i.PendingTransactionType.ConvertStake,display:{summary:p}};return{id:yield(0,i.signAndSendSolanaTransactionAsync)({accountIdentifier:s,feePayer:new(0,r.PublicKey)(c),connection:t,accountSigner:e,transaction:y,pendingTransactionInput:g,storage:n,opts:{additionalSignerAccounts:k}}),networkID:o.Chains.solana.mainnetID}}))})})),a.register("ls3Bv",(function(t,n){e(t.exports,"getConvertStakeAccountTransaction",(function(){return a("aye90").getConvertStakeAccountTransaction}));a("aye90")})),a.register("aye90",(function(t,n){e(t.exports,"getConvertStakeAccountTransaction",(function(){return s}),(function(e){return s=e}));var o=a("hMVEP"),r=a("jsXSE"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};const s=e=>i(void 0,[e],void 0,(function*({connection:e,stakePoolAddress:t,ownerAddress:n,validatorVoteAddress:a,stakeAccountAddress:i,poolTokenAccountAddress:s}){const u=new(0,o.PublicKey)(t),c=new(0,o.PublicKey)(n),d=new(0,o.PublicKey)(a),l=new(0,o.PublicKey)(i),f=s?new(0,o.PublicKey)(s):void 0,{instructions:p,signers:y}=yield(0,r.depositStake)(e,u,c,d,l,f),k=(yield e.getLatestBlockhash("confirmed")).blockhash;return{transaction:new(0,o.VersionedTransaction)(new(0,o.TransactionMessage)({instructions:p,payerKey:c,recentBlockhash:k}).compileToV0Message()),signers:y}}))})),a.register("jsXSE",(function(n,o){e(n.exports,"depositStake",(function(){return g}),(function(e){return g=e}));var r=a("hMVEP"),i=a("fxZCU"),s=a("dNfx5"),u=a("c1rzP"),c=a("1ZOZY"),d=a("kEQoY"),l=a("jMFTJ"),f=a("8tcqI").Buffer,p=function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{u(o.next(e))}catch(e){a(e)}}function s(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((o=o.apply(e,t||[])).next())}))};function y(e,t){return p(this,void 0,void 0,(function*(){const n=yield e.getAccountInfo(t);if(!n)throw new Error("Invalid stake pool account");return{pubkey:t,account:{data:l.StakePoolLayout.decode(n.data),executable:n.executable,lamports:n.lamports,owner:n.owner}}}))}function k(e,t){return p(this,void 0,void 0,(function*(){const[n]=yield r.PublicKey.findProgramAddress([t.toBuffer(),f.from("withdraw")],e);return n}))}function g(e,n,o,a,l,g){return p(this,void 0,void 0,(function*(){const v=yield y(e,n),S=yield k(c.STAKE_POOL_PROGRAM_ID,n),h=yield function(e,n,o,a){return p(this,void 0,void 0,(function*(){const[i]=yield r.PublicKey.findProgramAddress([n.toBuffer(),o.toBuffer(),a?new(t(u))(a).toArrayLike(f,"le",4):f.alloc(0)],e);return i}))}(c.STAKE_POOL_PROGRAM_ID,a,n),m=[],b=v.account.data.poolMint;if(!g){const e=(0,s.getAssociatedTokenAddressSync)(b,o);m.push((0,i.createAssociatedTokenAccountIdempotentInstruction)(o,e,o,b)),g=e}return m.push(...r.StakeProgram.authorize({stakePubkey:l,authorizedPubkey:o,newAuthorizedPubkey:v.account.data.stakeDepositAuthority,stakeAuthorizationType:r.StakeAuthorizationLayout.Staker}).instructions),m.push(...r.StakeProgram.authorize({stakePubkey:l,authorizedPubkey:o,newAuthorizedPubkey:v.account.data.stakeDepositAuthority,stakeAuthorizationType:r.StakeAuthorizationLayout.Withdrawer}).instructions),m.push(d.StakePoolInstruction.depositStake({stakePool:n,validatorList:v.account.data.validatorList,depositAuthority:v.account.data.stakeDepositAuthority,reserveStake:v.account.data.reserveStake,managerFeeAccount:v.account.data.managerFeeAccount,referralPoolAccount:g,destinationPoolAccount:g,withdrawAuthority:S,depositStake:l,validatorStake:h,poolMint:b})),{instructions:m,signers:[]}}))}})),a.register("fxZCU",(function(t,n){e(t.exports,"createAssociatedTokenAccountInstruction",(function(){return s})),e(t.exports,"createAssociatedTokenAccountIdempotentInstruction",(function(){return u}));var o=a("liYfk"),r=a("bfrkk"),i=a("8tcqI").Buffer;function s(e,t,n,o,a=r.TOKEN_PROGRAM_ID,s=r.ASSOCIATED_TOKEN_PROGRAM_ID){return c(e,t,n,o,i.alloc(0),a,s)}function u(e,t,n,o,a=r.TOKEN_PROGRAM_ID,s=r.ASSOCIATED_TOKEN_PROGRAM_ID){return c(e,t,n,o,i.from([1]),a,s)}function c(e,t,n,a,i,s=r.TOKEN_PROGRAM_ID,u=r.ASSOCIATED_TOKEN_PROGRAM_ID){const c=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new(0,o.TransactionInstruction)({keys:c,programId:u,data:i})}})),a.register("1ZOZY",(function(t,n){e(t.exports,"STAKE_POOL_PROGRAM_ID",(function(){return o}));const o=new(0,a("hMVEP").PublicKey)("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy")})),a.register("kEQoY",(function(t,n){e(t.exports,"StakePoolInstruction",(function(){return d}));var o=a("hMVEP"),r=a("bfrkk"),i=a("1ZOZY"),s=a("8tcqI").Buffer;const u=Object.freeze({DepositStake:{index:9,layout:o.BufferLayout.struct([o.BufferLayout.u8("instruction")])},DepositSol:{index:14,layout:o.BufferLayout.struct([o.BufferLayout.u8("instruction"),o.BufferLayout.ns64("lamports")])}});function c(e,t){const n=e.layout.span,o=s.alloc(n),r=Object.assign({instruction:e.index},t);return e.layout.encode(r,o),o}class d{static depositStake(e){const{stakePool:t,validatorList:n,depositAuthority:a,withdrawAuthority:s,depositStake:d,validatorStake:l,reserveStake:f,destinationPoolAccount:p,managerFeeAccount:y,referralPoolAccount:k,poolMint:g}=e,v=c(u.DepositStake),S=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:o.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:o.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:r.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:o.StakeProgram.programId,isSigner:!1,isWritable:!1}];return new(0,o.TransactionInstruction)({programId:i.STAKE_POOL_PROGRAM_ID,keys:S,data:v})}static depositSol(e){const{stakePool:t,withdrawAuthority:n,depositAuthority:a,reserveStake:s,fundingAccount:d,destinationPoolAccount:l,managerFeeAccount:f,referralPoolAccount:p,poolMint:y,lamports:k}=e,g=c(u.DepositSol,{lamports:k}),v=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:o.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:r.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}];return a&&v.push({pubkey:a,isSigner:!0,isWritable:!1}),new(0,o.TransactionInstruction)({programId:i.STAKE_POOL_PROGRAM_ID,keys:v,data:g})}}})),a.register("jMFTJ",(function(t,n){e(t.exports,"StakePoolLayout",(function(){return i}));var o=a("6m1jp");const r=[(0,o.u64)("denominator"),(0,o.u64)("numerator")],i=(0,o.struct)([(0,o.u8)("accountType"),(0,o.publicKey)("manager"),(0,o.publicKey)("staker"),(0,o.publicKey)("stakeDepositAuthority"),(0,o.u8)("stakeWithdrawBumpSeed"),(0,o.publicKey)("validatorList"),(0,o.publicKey)("reserveStake"),(0,o.publicKey)("poolMint"),(0,o.publicKey)("managerFeeAccount"),(0,o.publicKey)("tokenProgramId"),(0,o.u64)("totalLamports"),(0,o.u64)("poolTokenSupply"),(0,o.u64)("lastUpdateEpoch"),(0,o.struct)([(0,o.u64)("unixTimestamp"),(0,o.u64)("epoch"),(0,o.publicKey)("custodian")],"lockup"),(0,o.struct)(r,"epochFee"),(0,o.option)((0,o.struct)(r),"nextEpochFee"),(0,o.option)((0,o.publicKey)(),"preferredDepositValidatorVoteAddress"),(0,o.option)((0,o.publicKey)(),"preferredWithdrawValidatorVoteAddress"),(0,o.struct)(r,"stakeDepositFee"),(0,o.struct)(r,"stakeWithdrawalFee"),(0,o.option)((0,o.struct)(r),"nextStakeWithdrawalFee"),(0,o.u8)("stakeReferralFee"),(0,o.option)((0,o.publicKey)(),"solDepositAuthority"),(0,o.struct)(r,"solDepositFee"),(0,o.u8)("solReferralFee"),(0,o.option)((0,o.publicKey)(),"solWithdrawAuthority"),(0,o.struct)(r,"solWithdrawalFee"),(0,o.option)((0,o.struct)(r),"nextSolWithdrawalFee"),(0,o.u64)("lastEpochPoolTokenSupply"),(0,o.u64)("lastEpochTotalLamports")])})),a.register("6m1jp",(function(e,t){var n=a("8tcqI").Buffer,o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.map=e.exports.array=e.exports.rustEnum=e.exports.str=e.exports.vecU8=e.exports.tagged=e.exports.vec=e.exports.bool=e.exports.option=e.exports.publicKey=e.exports.i256=e.exports.u256=e.exports.i128=e.exports.u128=e.exports.i64=e.exports.u64=e.exports.struct=e.exports.f64=e.exports.f32=e.exports.i32=e.exports.u32=e.exports.i16=e.exports.u16=e.exports.i8=e.exports.u8=void 0;var r=a("lCwV5"),i=a("liYfk");const s=o(a("c1rzP"));r=a("lCwV5");Object.defineProperty(e.exports,"u8",{enumerable:!0,get:function(){return r.u8}}),Object.defineProperty(e.exports,"i8",{enumerable:!0,get:function(){return r.s8}}),Object.defineProperty(e.exports,"u16",{enumerable:!0,get:function(){return r.u16}}),Object.defineProperty(e.exports,"i16",{enumerable:!0,get:function(){return r.s16}}),Object.defineProperty(e.exports,"u32",{enumerable:!0,get:function(){return r.u32}}),Object.defineProperty(e.exports,"i32",{enumerable:!0,get:function(){return r.s32}}),Object.defineProperty(e.exports,"f32",{enumerable:!0,get:function(){return r.f32}}),Object.defineProperty(e.exports,"f64",{enumerable:!0,get:function(){return r.f64}}),Object.defineProperty(e.exports,"struct",{enumerable:!0,get:function(){return r.struct}});class u extends r.Layout{decode(e,t=0){const n=new s.default(this.blob.decode(e,t),10,"le");return this.signed?n.fromTwos(8*this.span).clone():n}encode(e,t,o=0){return this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(n,"le",this.span),t,o)}constructor(e,t,n){super(e,n),this.blob=(0,r.blob)(e),this.signed=t}}function c(e){return new u(8,!1,e)}e.exports.u64=c,e.exports.i64=function(e){return new u(8,!0,e)},e.exports.u128=function(e){return new u(16,!1,e)},e.exports.i128=function(e){return new u(16,!0,e)},e.exports.u256=function(e){return new u(32,!1,e)},e.exports.i256=function(e){return new u(32,!0,e)};class d extends r.Layout{decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}constructor(e,t,n,o){super(e.span,o),this.layout=e,this.decoder=t,this.encoder=n}}e.exports.publicKey=function(e){return new d((0,r.blob)(32),(e=>new i.PublicKey(e)),(e=>e.toBuffer()),e)};class l extends r.Layout{encode(e,t,n=0){return null==e?this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+1)+1)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return null;if(1===n)return this.layout.decode(e,t+1);throw new Error("Invalid option "+this.property)}getSpan(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return 1;if(1===n)return this.layout.getSpan(e,t+1)+1;throw new Error("Invalid option "+this.property)}constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(0,r.u8)()}}function f(e){if(0===e)return!1;if(1===e)return!0;throw new Error("Invalid bool: "+e)}function p(e){return e?1:0}function y(e){const t=(0,r.u32)("length"),n=(0,r.struct)([t,(0,r.blob)((0,r.offset)(t,-t.span),"data")]);return new d(n,(({data:e})=>e),(e=>({data:e})),e)}e.exports.option=function(e,t){return new l(e,t)},e.exports.bool=function(e){return new d((0,r.u8)(),f,p,e)},e.exports.vec=function(e,t){const n=(0,r.u32)("length"),o=(0,r.struct)([n,(0,r.seq)(e,(0,r.offset)(n,-n.span),"values")]);return new d(o,(({values:e})=>e),(e=>({values:e})),t)},e.exports.tagged=function(e,t,n){const o=(0,r.struct)([c("tag"),t.replicate("data")]);return new d(o,(function({tag:t,data:n}){if(!t.eq(e))throw new Error("Invalid tag, expected: "+e.toString("hex")+", got: "+t.toString("hex"));return n}),(t=>({tag:e,data:t})),n)},e.exports.vecU8=y,e.exports.str=function(e){return new d(y(),(e=>e.toString("utf-8")),(e=>n.from(e,"utf-8")),e)},e.exports.rustEnum=function(e,t,n){const o=(0,r.union)(null!=n?n:(0,r.u8)(),t);return e.forEach(((e,t)=>o.addVariant(t,e,e.property))),o},e.exports.array=function(e,t,n){const o=(0,r.struct)([(0,r.seq)(e,t,"values")]);return new d(o,(({values:e})=>e),(e=>({values:e})),n)};class k extends r.Layout{decode(e,t){t=t||0;return[this.keyLayout.decode(e,t),this.valueLayout.decode(e,t+this.keyLayout.getSpan(e,t))]}encode(e,t,n){n=n||0;const o=this.keyLayout.encode(e[0],t,n);return o+this.valueLayout.encode(e[1],t,n+o)}getSpan(e,t){return this.keyLayout.getSpan(e,t)+this.valueLayout.getSpan(e,t)}constructor(e,t,n){super(e.span+t.span,n),this.keyLayout=e,this.valueLayout=t}}e.exports.map=function(e,t,n){const o=(0,r.u32)("length"),a=(0,r.struct)([o,(0,r.seq)(new k(e,t),(0,r.offset)(o,-o.span),"values")]);return new d(a,(({values:e})=>new Map(e)),(e=>({values:Array.from(e.entries())})),n)}})),a.register("7umtj",(function(t,n){e(t.exports,"parseStakingError",(function(){return r}));var o=a("3vaB1");function r(e){return e instanceof o.StakingError?e:new(0,o.StakingError)(o.StakingErrorCodes.UnknownError)}})),a.register("kFx26",(function(t,n){e(t.exports,"useNativeLiquidStaking",(function(){return i}));var o=a("f5UU6"),r=a("i6CYo");const i=(e,t)=>{const n=o.NETWORK_TO_NATIVE_FUNGIBLE.get(t);return(0,r.useLiquidStaking)(e,n)}})),a.register("8B6ZJ",(function(t,n){e(t.exports,"createStakeAnalytics",(function(){return i}));var o=a("h0VH5");const r={type:"fungible",isNativeOfType:"sol",chain:a("iOvk1").Chain.Solana,name:"Solana",symbol:"SOL",iconUrl:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",decimals:9},i=e=>new s(e,"stake");class s extends o.SequenceAnalytics{constructor(){super(...arguments),this.createStakeAccountAndDelegateStake=e=>{this.analytics.capture("createStakeAccountAndDelegateStake",{data:Object.assign(Object.assign({},e),r)})},this.deactivateStake=()=>{this.analytics.capture("deactivateStake",{data:Object.assign({},r)})}}}})),a.register("czeP8",(function(t,n){e(t.exports,"useGetMaxTransferrableSol",(function(){return u}));var o=a("hMVEP"),r=a("7gANb"),i=a("RVqnc"),s=a("jWhdR");const u=({balance:e,cluster:t,rentExemptionMinimum:n})=>{const{data:a}=(0,r.useNetworkFeeSolana)(t),u=(0,s.getMaxTransferrableSol)({numSignatures:11,lamportsPerSignature:a,lamportBalance:(0,i.BigNumber)(e),rentExemptionMinimum:(0,o.solanaToLamports)(n)});return parseFloat((0,o.lamportsToSolana)(u).toFixed(9))}})),a.register("jWhdR",(function(n,o){e(n.exports,"getMaxTransferrableSol",(function(){return i}));var r=a("kAKNF");const i=({numSignatures:e,lamportsPerSignature:n,lamportBalance:o,rentExemptionMinimum:a})=>{const i=t(r)(n).multipliedBy(e),s=o.minus(i);return t(r).max(s.minus(a),0)}})),a.register("fMZSj",(function(t,n){e(t.exports,"stakingShouldDehydrateQueryPredicate",(function(){return r}));const o=[a("7dNLn").LIQUID_STAKING_QUERY_KEYS_PREFIX.supportedTokens],r=e=>{const t=String(e.queryKey[1]);return o.includes(t)}}))}();
//# sourceMappingURL=staking.e599f575.js.map
define=__define;})(window.define);