(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire1d24;e.register("lQedB",(function(f,r){Object.defineProperty(f.exports,"__esModule",{value:!0}),f.exports.BIP32Factory=f.exports.default=void 0;var t=e("6Tlr2");Object.defineProperty(f.exports,"default",{enumerable:!0,get:function(){return t.BIP32Factory}}),Object.defineProperty(f.exports,"BIP32Factory",{enumerable:!0,get:function(){return t.BIP32Factory}})})),e.register("6Tlr2",(function(f,r){var t=e("6rT8n").Buffer;Object.defineProperty(f.exports,"__esModule",{value:!0}),f.exports.BIP32Factory=void 0;var i=e("aBHgu"),a=e("ged0K"),n=e("3pWhu"),c=e("6B1js"),d=e("8DFnu"),o=e("2kT0C");const b=(0,n.base58check)(c.sha256),s={encode:e=>b.encode(Uint8Array.from(e)),decode:e=>t.from(b.decode(e))};f.exports.BIP32Factory=function(e){(0,a.testEcc)(e);const f=d.BufferN(32),r=d.compile({wif:d.UInt8,bip32:{public:d.UInt32,private:d.UInt32}}),n={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},c=2147483648,b=Math.pow(2,31)-1;function h(e){return d.String(e)&&null!==e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function p(e){return d.UInt32(e)&&e<=b}class u{get publicKey(){return void 0===this.__Q&&(this.__Q=t.from(e.pointFromScalar(this.__D,!0))),this.__Q}get privateKey(){return this.__D}sign(f,r){if(!this.privateKey)throw new Error("Missing private key");if(void 0===r&&(r=this.lowR),!1===r)return t.from(e.sign(f,this.privateKey));{let r=t.from(e.sign(f,this.privateKey));const i=t.alloc(32,0);let a=0;for(;r[0]>127;)a++,i.writeUIntLE(a,0,6),r=t.from(e.sign(f,this.privateKey,i));return r}}signSchnorr(f){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return t.from(e.signSchnorr(f,this.privateKey))}verify(f,r){return e.verify(f,this.publicKey,r)}verifySchnorr(f,r){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(f,this.publicKey.subarray(1,33),r)}constructor(e,f){this.__D=e,this.__Q=f,this.lowR=!1}}class l extends u{get depth(){return this.__DEPTH}get index(){return this.__INDEX}get parentFingerprint(){return this.__PARENT_FINGERPRINT}get identifier(){return i.hash160(this.publicKey)}get fingerprint(){return this.identifier.slice(0,4)}get compressed(){return!0}isNeutered(){return void 0===this.__D}neutered(){return w(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}toBase58(){const e=this.network,f=this.isNeutered()?e.bip32.public:e.bip32.private,r=t.allocUnsafe(78);return r.writeUInt32BE(f,0),r.writeUInt8(this.depth,4),r.writeUInt32BE(this.parentFingerprint,5),r.writeUInt32BE(this.index,9),this.chainCode.copy(r,13),this.isNeutered()?this.publicKey.copy(r,45):(r.writeUInt8(0,45),this.privateKey.copy(r,46)),s.encode(r)}toWIF(){if(!this.privateKey)throw new TypeError("Missing private key");return o.encode(this.network.wif,this.privateKey,!0)}derive(f){d(d.UInt32,f);const r=f>=c,a=t.allocUnsafe(37);if(r){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");a[0]=0,this.privateKey.copy(a,1),a.writeUInt32BE(f,33)}else this.publicKey.copy(a,0),a.writeUInt32BE(f,33);const n=i.hmacSHA512(this.chainCode,a),o=n.slice(0,32),b=n.slice(32);if(!e.isPrivate(o))return this.derive(f+1);let s;if(this.isNeutered()){const r=t.from(e.pointAddScalar(this.publicKey,o,!0));if(null===r)return this.derive(f+1);s=w(r,b,this.network,this.depth+1,f,this.fingerprint.readUInt32BE(0))}else{const r=t.from(e.privateAdd(this.privateKey,o));if(null==r)return this.derive(f+1);s=v(r,b,this.network,this.depth+1,f,this.fingerprint.readUInt32BE(0))}return s}deriveHardened(e){return d(p,e),this.derive(e+c)}derivePath(e){d(h,e);let f=e.split("/");if("m"===f[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");f=f.slice(1)}return f.reduce(((e,f)=>{let r;return"'"===f.slice(-1)?(r=parseInt(f.slice(0,-1),10),e.deriveHardened(r)):(r=parseInt(f,10),e.derive(r))}),this)}tweak(e){return this.privateKey?this.tweakFromPrivateKey(e):this.tweakFromPublicKey(e)}tweakFromPublicKey(f){const r=32===(i=this.publicKey).length?i:i.slice(1,33);var i;if(!e.xOnlyPointAddTweak)throw new Error("xOnlyPointAddTweak not supported by ecc library");const a=e.xOnlyPointAddTweak(r,f);if(!a||null===a.xOnlyPubkey)throw new Error("Cannot tweak public key!");const n=t.from([0===a.parity?2:3]),c=t.concat([n,a.xOnlyPubkey]);return new u(void 0,c)}tweakFromPrivateKey(f){const r=3===this.publicKey[0]||4===this.publicKey[0]&&1==(1&this.publicKey[64]),i=(()=>{if(r){if(e.privateNegate)return e.privateNegate(this.privateKey);throw new Error("privateNegate not supported by ecc library")}return this.privateKey})(),a=e.privateAdd(i,f);if(!a)throw new Error("Invalid tweaked private key!");return new u(t.from(a),void 0)}constructor(e,f,t,i,a=0,n=0,c=0){super(e,f),this.chainCode=t,this.network=i,this.__DEPTH=a,this.__INDEX=n,this.__PARENT_FINGERPRINT=c,d(r,i)}}function y(e,f,r){return v(e,f,r)}function v(r,t,i,a,c,o){if(d({privateKey:f,chainCode:f},{privateKey:r,chainCode:t}),i=i||n,!e.isPrivate(r))throw new TypeError("Private key not in range [1, n)");return new l(r,void 0,t,i,a,c,o)}function w(r,t,i,a,c,o){if(d({publicKey:d.BufferN(33),chainCode:f},{publicKey:r,chainCode:t}),i=i||n,!e.isPoint(r))throw new TypeError("Point is not on the curve");return new l(void 0,r,t,i,a,c,o)}return{fromSeed:function(e,f){if(d(d.Buffer,e),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");f=f||n;const r=i.hmacSHA512(t.from("Bitcoin seed","utf8"),e);return y(r.slice(0,32),r.slice(32),f)},fromBase58:function(e,f){const r=s.decode(e);if(78!==r.length)throw new TypeError("Invalid buffer length");f=f||n;const t=r.readUInt32BE(0);if(t!==f.bip32.private&&t!==f.bip32.public)throw new TypeError("Invalid network version");const i=r[4],a=r.readUInt32BE(5);if(0===i&&0!==a)throw new TypeError("Invalid parent fingerprint");const c=r.readUInt32BE(9);if(0===i&&0!==c)throw new TypeError("Invalid index");const d=r.slice(13,45);let o;if(t===f.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");o=v(r.slice(46,78),d,f,i,c,a)}else{o=w(r.slice(45,78),d,f,i,c,a)}return o},fromPublicKey:function(e,f,r){return w(e,f,r)},fromPrivateKey:y}}})),e.register("aBHgu",(function(f,r){var t=e("6rT8n").Buffer;Object.defineProperty(f.exports,"__esModule",{value:!0}),f.exports.hmacSHA512=f.exports.hash160=void 0;var i=e("1WQPu"),a=e("86Nlm"),n=e("6B1js"),c=e("nzoa4");f.exports.hash160=function(e){const f=(0,n.sha256)(Uint8Array.from(e));return t.from((0,a.ripemd160)(f))},f.exports.hmacSHA512=function(e,f){return t.from((0,i.hmac)(c.sha512,e,f))}})),e.register("ged0K",(function(f,r){var t=e("6rT8n").Buffer;Object.defineProperty(f.exports,"__esModule",{value:!0}),f.exports.testEcc=void 0;const i=e=>t.from(e,"hex");function a(e){if(!e)throw new Error("ecc library invalid")}f.exports.testEcc=function(e){if(a(e.isPoint(i("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),a(!e.isPoint(i("030000000000000000000000000000000000000000000000000000000000000005"))),a(e.isPrivate(i("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),a(e.isPrivate(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),a(!e.isPrivate(i("0000000000000000000000000000000000000000000000000000000000000000"))),a(!e.isPrivate(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),a(!e.isPrivate(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),a(t.from(e.pointFromScalar(i("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(i("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),e.xOnlyPointAddTweak){a(null===e.xOnlyPointAddTweak(i("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140")));let f=e.xOnlyPointAddTweak(i("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),i("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));a(t.from(f.xOnlyPubkey).equals(i("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&1===f.parity),f=e.xOnlyPointAddTweak(i("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),i("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47"))}a(t.from(e.pointAddScalar(i("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),i("0000000000000000000000000000000000000000000000000000000000000003"))).equals(i("02c6047f9441ed7d6d3045406e95c07cd85c778e4b8cef3ca7abac09b95c709ee5"))),a(t.from(e.privateAdd(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),i("0000000000000000000000000000000000000000000000000000000000000002"))).equals(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),e.privateNegate&&(a(t.from(e.privateNegate(i("0000000000000000000000000000000000000000000000000000000000000001"))).equals(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),a(t.from(e.privateNegate(i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(i("0000000000000000000000000000000000000000000000000000000000000003"))),a(t.from(e.privateNegate(i("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(i("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792")))),a(t.from(e.sign(i("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),i("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(i("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),a(e.verify(i("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),i("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),i("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&a(t.from(e.signSchnorr(i("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),i("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),i("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(i("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&a(e.verifySchnorr(i("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),i("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),i("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}}));
//# sourceMappingURL=bip32.f27ae5a8.js.map
define=__define;})(window.define);