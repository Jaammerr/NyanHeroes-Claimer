(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
!function(){function e(e,n,t,i){Object.defineProperty(e,n,{get:t,set:i,enumerable:!0,configurable:!0})}var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire1d24;n.register("8ZF3Y",(function(t,i){e(t.exports,"MigrationAttemptResult",(function(){return o}),(function(e){return o=e})),e(t.exports,"migrateIfNeededAndEnableMultichain",(function(){return c}),(function(e){return c=e}));var o,r,a=n("41yT6"),l=n("9KHVf"),d=n("h1hWw"),u=function(e,n,t,i){return new(t||(t=Promise))((function(o,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function l(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,l)}d((i=i.apply(e,n||[])).next())}))};(r=o||(o={})).HasAlreadyBeenCompleted="hasAlreadyBeenCompleted",r.CouldNotStart="couldNotStart",r.Completed="completed",r.Failed="failed";const c=e=>u(void 0,void 0,void 0,(function*(){const n=yield f(e,!0);return n===o.Completed&&(yield(0,d.setMultichainGTMEnabledOverride)(),yield a.queryClient.invalidateQueries({refetchType:"all"})),n})),f=(e,n)=>u(void 0,void 0,void 0,(function*(){if(yield e.hasCompletedMigration())return o.HasAlreadyBeenCompleted;const t=yield e.canStartMigration();if(!1===t.result)return l.migrationAnalytics.onCanStartMigrationResult(t),o.CouldNotStart;l.migrationAnalytics.onMigrationStarted();const i=yield e.migrate();return i&&(yield e.cleanup()),l.migrationAnalytics.onMigrationSettled(n,i),i?o.Completed:o.Failed}))})),n.register("h1hWw",(function(t,i){e(t.exports,"setMultichainGTMEnabledOverride",(function(){return u}),(function(e){return u=e}));var o=n("goVRJ"),r=n("twk6W"),a=n("6zJYJ"),l=function(e,n,t,i){return new(t||(t=Promise))((function(o,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function l(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,l)}d((i=i.apply(e,n||[])).next())}))};const d=new(0,o.LegacyIndexedDBProxy),u=()=>l(void 0,void 0,void 0,(function*(){yield d.set(a.multichainEnabledOverrideStorageKey,{version:2,forceMultichainEnabled:!0,multiChainGTMEnabled:!0}),yield r.analytics.capture("migrationMultichainSetGTMOverride")}))}))}();
//# sourceMappingURL=multichainMigration.0d3fa1ba.js.map
define=__define;})(window.define);