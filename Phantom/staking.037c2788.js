(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},a=n.parcelRequire1d24;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},n.parcelRequire1d24=a),a.register("6oMdZ",(function(t,n){e(t.exports,"PHANTOM_STAKE_NODE",(function(){return r})),e(t.exports,"SOL_STAKING_DOCS",(function(){return a("islf0").SOL_STAKING_DOCS})),e(t.exports,"SOL_STAKING_REWARDS_DOCS",(function(){return a("islf0").SOL_STAKING_REWARDS_DOCS})),e(t.exports,"createStakingHooks",(function(){return a("gVED6").createStakingHooks})),e(t.exports,"StakeAccountType",(function(){return a("7rWiL").StakeAccountType})),e(t.exports,"calculateTotalValidatorAPY",(function(){return a("ep0HO").calculateTotalValidatorAPY})),e(t.exports,"recommendedValidatorSorter",(function(){return a("7xt7C").recommendedValidatorSorter})),e(t.exports,"createStakeAnalytics",(function(){return a("k2NbH").createStakeAnalytics})),e(t.exports,"useGetMaxTransferrableSol",(function(){return a("cBz6V").useGetMaxTransferrableSol})),e(t.exports,"stakingShouldDehydrateQueryPredicate",(function(){return a("hvGDb").stakingShouldDehydrateQueryPredicate}));a("islf0");a("cTTnM");a("gVED6"),a("7rWiL");a("jqEmo");a("ep0HO"),a("7xt7C"),a("k2NbH"),a("cBz6V"),a("fHWFb");a("1rRmV");a("3s5hF"),a("hvGDb");const r={identityPublicKey:"7GkMBmtrTZz8QbjSe1sXvAUtz7Pp42SQxfT5ymmJD4We",voteAccountPublicKey:"J2nUHEAgZFRyuJbFjdqPrAa9gyWDuc7hErtDQHPhsYRp"}})),a.register("islf0",(function(t,n){e(t.exports,"CONFIG_PROGRAM_ID",(function(){return u})),e(t.exports,"SOL_STAKING_DOCS",(function(){return c})),e(t.exports,"SOL_STAKING_REWARDS_DOCS",(function(){return d})),e(t.exports,"NETWORK_TO_NATIVE_FUNGIBLE",(function(){return f}));var r=a("belzv"),o=a("gYh0e"),i=a("3fvLJ"),s=a("4y59b");const u=new(0,i.PublicKey)("Config1111111111111111111111111111111111111"),c="https://docs.solana.com/staking",d="https://docs.solana.com/implemented-proposals/staking-rewards",l={type:o.FungibleTokenType.SolanaNative,data:{amount:"0",balance:new(0,s.BigNumber)(0),chain:{id:r.Chains.solana.mainnetID,imageUrl:r.Chains.solana.iconUrl,name:r.Chains.solana.name,symbol:r.Chains.solana.tokenSymbol},coingeckoId:"solana",decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:o.SpamStatus.NotVerified}},f=new Map([[r.NetworkIDs.Solana.Mainnet,l]])})),a.register("cTTnM",(function(t,n){e(t.exports,"createStakingHooks",(function(){return a("gVED6").createStakingHooks}));a("gVED6")})),a.register("gVED6",(function(t,n){e(t.exports,"createStakingHooks",(function(){return T}));var r=a("4raQz"),o=a("F4adS"),i=a("1Dvov"),s=a("5spRy"),u=a("2xlzY"),c=a("k6uFh"),d=a("chsS5"),l=a("gt5rg"),f=a("i6Kga"),p=a("fHWFb"),y=a("lxI2A"),g=a("aCG5w"),k=a("jRSxq"),v=a("7hUpm"),S=a("dBN2w"),h=a("f2N2q"),m=a("8wC6T"),b=a("a8a7m"),A=a("jkU7b"),P=a("02ODq"),w=a("hdx8w");function T({analytics:e,accountSigner:t,accountHooks:n,storage:a,legacyStorage:T,fungiblesSdk:x,priceHooks:I,transactionHooks:C,queryClient:D,getApiEnvironment:E,stakeAnalytics:N}){const L=new(0,r.PriorityFeeService);return{useKeybaseUserAvatar:e=>(0,u.useKeybaseUserAvatar)(e),useRecommendedValidators:()=>(0,c.useRecommendedValidators)(E),useSignatureStatus:(e,t,n)=>(0,d.useSignatureStatus)(D,e,t,n),useStakeAccounts:f.useStakeAccounts,useStakeAccountMinBalance:l.useStakeAccountMinBalance,useStakeActivationData:p.useStakeActivationData,useStakeApy:()=>(0,y.useStakeApy)(E),useStakeRewardsHistory:(e,t)=>(0,g.useStakeRewardsHistory)(E,e,t),useValidators:v.useValidators,useValidatorInfo:k.useValidatorInfo,useVoteAccounts:S.useVoteAccounts,useConvertStakeAccountReviewPageProps:e=>(0,b.useConvertStakeAccountReviewPageProps)({accountHooks:n,priceHooks:I,navigateToStatusPage:e}),useConvertStakeAccountListPageProps:e=>(0,m.useConvertStakeAccountListPageProps)({accountHooks:n,transactionHooks:C,navigateToReviewPage:e}),useLiquidStakingStatusPageProps:r=>(0,P.useLiquidStakingStatusPageProps)(Object.assign(Object.assign({},r),{analytics:e,accountSigner:t,accountHooks:n,storage:a,legacyStorage:T,fungiblesSdk:x,transactionHooks:C,queryClient:D,getApiEnvironment:E})),useConvertStakeBannerProps:e=>(0,A.useConvertStakeBannerProps)(Object.assign(Object.assign({},e),{accountHooks:n,transactionHooks:C,getApiEnvironment:E})),useNativeLiquidStaking:e=>(0,w.useNativeLiquidStaking)(E,e),useDelegateStake:e=>(0,s.useDelegateStake)(C,e,D,L,N),useCreateStakeAccountAndDelegateStake:e=>(0,o.useCreateStakeAccountAndDelegateStake)(C,e,D,L,N),useDeactivateStake:e=>(0,i.useDeactivateStake)(C,e,D,L,N),useWithdrawStake:e=>(0,h.useWithdrawStake)(C,e,D,L,N)}}})),a.register("F4adS",(function(t,n){e(t.exports,"useCreateStakeAccountAndDelegateStake",(function(){return k}),(function(e){return k=e}));var r=a("belzv"),o=a("lMzyG"),i=a("gd9Oy"),s=a("3fvLJ"),u=a("4yY1D"),c=a("4raQz"),d=a("fG04A"),l=a("24sH7");a("jqEmo");var f=a("kW76A"),p=a("5spRy"),y=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};function g({lamports:e,votePubkey:t,authorizedPubkey:n}){const[r,o]=function({ownerPublicKey:e,lamports:t,transaction:n=new(0,s.Transaction)}){const r=s.Keypair.generate();return n.add(s.StakeProgram.createAccount({fromPubkey:e,stakePubkey:r.publicKey,authorized:new(0,s.Authorized)(e,e),lamports:t})),[n,r]}({ownerPublicKey:n,lamports:e});return r.add((0,p.delegateStake)({stakePubkey:o.publicKey,authorizedPubkey:n,votePubkey:t})),[r,o]}const k=(e,t,n,a,p)=>{const{t:k}=(0,o.useTranslation)(),{mutateAsync:v}=e.useSignAndSendSolanaTransactionAsync(t);return(0,d.useMutation)({mutationFn:e=>y(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,lamports:o,votePubkey:u,authorizedPubkey:d,usdPerSol:f}){if(!n)throw l.MissingSenderAddressError;const{networkID:y,address:S}=n,[h,m]=g({accountIdentifier:e,senderAddress:n,lamports:o,votePubkey:u,authorizedPubkey:d}),b=yield a.addPriorityFee(h,{connection:t}),A={ownerAddress:null!=S?S:"",networkID:y,data:{signature:""},type:c.PendingTransactionType.CreateAccountAndDelegateStake,display:{summary:{topLeft:{label:k("transactionsPendingCreatingAndDelegatingStake")}}}};p.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(y),type:"delegate"})));const P=yield v({accountIdentifier:e,feePayer:new(0,s.PublicKey)(S),transaction:b,pendingTransactionInput:A,opts:{additionalSignerAccounts:[m]}});p.then((e=>e.submittedTransaction(P,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(y),method:"signAndSendTransaction"})));const w=(0,s.lamportsToSolana)(o),T=f?w.times(f):void 0;return p.then((e=>e.createStakeAccountAndDelegateStake({sol:w.toNumber(),usd:null==T?void 0:T.toNumber(),voteAccountPubkey:u}))),{networkID:y,id:null!=P?P:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{p.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,f.invalidateAllStakeAccountData)(n)()})).catch((t=>{p.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("24sH7",(function(t,n){e(t.exports,"MissingSenderAddressError",(function(){return r})),e(t.exports,"MissingConfirmationSignatureError",(function(){return o})),e(t.exports,"MissingPublicKeyError",(function(){return a})),e(t.exports,"StakingErrorCodes",(function(){return i})),e(t.exports,"StakingError",(function(){return u}));const r=new Error("Missing sender address for staking fungibles."),o=(new Error("Missing signature from staking fungibles."),new Error("Missing signature from waiting for staking transaction confirmation.")),a=new Error("PublicKey is required");var i,s;(s=i||(i={})).NoProviderError="NoProviderError",s.NoConvertDetailsError="NoConvertDetailsError",s.UnknownError="UnknownError",s.FailedToConfirmTransaction="FailedToConfirmTransaction";class u extends Error{constructor(e){super(e)}}})),a.register("jqEmo",(function(t,n){e(t.exports,"calculateTotalValidatorAPY",(function(){return a("ep0HO").calculateTotalValidatorAPY})),e(t.exports,"invalidateAllStakeAccountData",(function(){return a("kW76A").invalidateAllStakeAccountData})),e(t.exports,"recommendedValidatorSorter",(function(){return a("7xt7C").recommendedValidatorSorter}));a("ep0HO"),a("kW76A"),a("7xt7C"),a("kkkNB")})),a.register("ep0HO",(function(n,r){e(n.exports,"calculateTotalValidatorAPY",(function(){return i}));var o=a("3yHS8");function i(e,n){const r=new(t(o))(e/100),a=new(t(o))(n/100);return r.minus(r.times(a)).times(100).decimalPlaces(2).toNumber()}})),a.register("kW76A",(function(t,n){e(t.exports,"invalidateAllStakeAccountData",(function(){return o}));var r=a("bZPmb");const o=e=>()=>{e.invalidateQueries({predicate:e=>!!r.STAKE_ACCOUNTS_SCOPE.every(((t,n)=>e.queryKey[n]===t))||r.STAKE_ACTIVATION_DATA_SCOPE.every(((t,n)=>e.queryKey[n]===t))})}})),a.register("bZPmb",(function(t,n){e(t.exports,"STAKE_ACCOUNTS_SCOPE",(function(){return o})),e(t.exports,"STAKE_ACTIVATION_DATA_SCOPE",(function(){return a})),e(t.exports,"LIQUID_STAKING_QUERY_KEYS_PREFIX",(function(){return i})),e(t.exports,"stakingQueryKeys",(function(){return u}));const r="staking",o=[r,"stakeAccounts"],a=[r,"stakeActivationData"];var i,s;(s=i||(i={})).convertStakeList="convertStakeAccountList",s.supportedTokens="liquidStakingSupportedTokens";const u={keybaseUserAvatar:e=>[r,"keybaseUserAvatar",e],signatureStatus:e=>[r,"signatureStatus",e],stakeAccounts:(e,t)=>[...o,e,t],stakeAccountMinBalance:()=>[r,"stakeAccountMinBalance"],stakeActivationData:e=>[...a,e],stakeRewardsHistory:e=>[r,"stakeRewardsHistory",e],stakeApy:()=>[r,"stakeApy"],recommendedValidators:()=>[r,"recommendedValidators"],validatorInfo:()=>[r,"validatorInfo"],voteAccounts:e=>[r,"voteAccounts",e],convertStakeAccountList:(e,t)=>[r,i.convertStakeList,e,t],liquidStakingSupportedTokens:e=>[r,i.supportedTokens,e]}})),a.register("7xt7C",(function(t,n){e(t.exports,"recommendedValidatorSorter",(function(){return r}));const r=e=>(t,n)=>{const r=e.indexOf(t.voteAccountPubkey),o=e.indexOf(n.voteAccountPubkey);return(r>-1?r:1/0)-(o>-1?o:1/0)}})),a.register("kkkNB",(function(t,n){e(t.exports,"voteAccountSorter",(function(){return o}));const r=(e,t)=>e+t[1],o=(e,t)=>{if(e.commission>50||t.commission>50)return e.commission-t.commission;const n=e.epochCredits.reduce(r,0)*(1-e.commission/100);return t.epochCredits.reduce(r,0)*(1-t.commission/100)-n}})),a.register("5spRy",(function(t,n){e(t.exports,"delegateStake",(function(){return y}),(function(e){return y=e})),e(t.exports,"useDelegateStake",(function(){return g}),(function(e){return g=e}));var r=a("belzv"),o=a("lMzyG"),i=a("gd9Oy"),s=a("3fvLJ"),u=a("4yY1D"),c=a("4raQz"),d=a("fG04A"),l=a("24sH7");a("jqEmo");var f=a("kW76A"),p=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};function y({stakePubkey:e,authorizedPubkey:t,votePubkey:n}){return s.StakeProgram.delegate({stakePubkey:e,authorizedPubkey:t,votePubkey:n})}const g=(e,t,n,a,g)=>{const{t:k}=(0,o.useTranslation)(),{mutateAsync:v}=e.useSignAndSendSolanaTransactionAsync(t);return(0,d.useMutation)({mutationFn:e=>p(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,stakePubkey:o,authorizedPubkey:u,votePubkey:d}){if(!n)throw l.MissingSenderAddressError;const{networkID:f,address:p}=n,S=y({stakePubkey:o,authorizedPubkey:u,votePubkey:d}),h=yield a.addPriorityFee(S,{connection:t}),m={ownerAddress:null!=p?p:"",networkID:f,data:{signature:""},type:c.PendingTransactionType.DelegateStake,display:{summary:{topLeft:{label:k("transactionsPendingDelegatingStake")}}}};g.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(f),type:"delegate"})));const b=yield v({accountIdentifier:e,feePayer:new(0,s.PublicKey)(p),transaction:h,pendingTransactionInput:m});return g.then((e=>e.submittedTransaction(b,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(f),method:"signAndSendTransaction"}))),{networkID:f,id:null!=b?b:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{g.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,f.invalidateAllStakeAccountData)(n)()})).catch((t=>{g.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("1Dvov",(function(t,n){e(t.exports,"useDeactivateStake",(function(){return y}),(function(e){return y=e}));var r=a("belzv"),o=a("lMzyG"),i=a("gd9Oy"),s=a("3fvLJ"),u=a("4yY1D"),c=a("4raQz"),d=a("fG04A"),l=a("24sH7");a("jqEmo");var f=a("kW76A"),p=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const y=(e,t,n,a,y)=>{const{t:g}=(0,o.useTranslation)(),{mutateAsync:k}=e.useSignAndSendSolanaTransactionAsync(t);return(0,d.useMutation)({mutationFn:e=>p(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,stakePubkey:o,stakeAuthorityPubkey:u,authorizedPubkey:d}){if(!n)throw l.MissingSenderAddressError;const{networkID:f,address:p}=n,v=function({stakePubkey:e,stakeAuthorityPubkey:t,authorizedPubkey:n,transaction:r=new(0,s.Transaction)}){return t.equals(n)||r.add(s.StakeProgram.authorize({authorizedPubkey:n,newAuthorizedPubkey:n,stakeAuthorizationType:s.StakeAuthorizationLayout.Staker,stakePubkey:e})),r.add(s.StakeProgram.deactivate({stakePubkey:e,authorizedPubkey:n})),r}({stakePubkey:o,stakeAuthorityPubkey:u,authorizedPubkey:d}),S=yield a.addPriorityFee(v,{connection:t}),h={ownerAddress:null!=p?p:"",networkID:f,data:{signature:""},type:c.PendingTransactionType.DeactivateStake,display:{summary:{topLeft:{label:g("transactionsPendingDeactivatingStake")}}}};y.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(f),type:"undelegate"})));const m=yield k({accountIdentifier:e,feePayer:new(0,s.PublicKey)(p),transaction:S,pendingTransactionInput:h});return y.then((e=>e.submittedTransaction(m,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(f),method:"signAndSendTransaction"}))),y.then((e=>e.deactivateStake())),{networkID:f,id:null!=m?m:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{y.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,f.invalidateAllStakeAccountData)(n)()})).catch((t=>{y.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("2xlzY",(function(t,n){e(t.exports,"useKeybaseUserAvatar",(function(){return u}),(function(e){return u=e}));var r=a("lNRH9"),o=a("eXFbY"),i=a("bZPmb"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const u=e=>{const t=i.stakingQueryKeys.keybaseUserAvatar(e);return(0,r.useQuery)({enabled:!!e,queryKey:t,queryFn(){return s(this,void 0,void 0,(function*(){if(!e)throw new Error("Keybase username is required");return(0,o.getKeybaseUserAvatar)(e)}))},placeholderData:""})}})),a.register("eXFbY",(function(t,n){e(t.exports,"getKeybaseUserAvatar",(function(){return i}),(function(e){return i=e}));var r=a("8kIyR"),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const i=e=>o(void 0,void 0,void 0,(function*(){var t;const n=yield r.rb.get(`https://keybase.io/_/api/1.0/user/pic_url.json?username=${encodeURIComponent(e)}`);if(!(0,r.responseIsOkay)(n)||0!==(null===(t=n.data.status)||void 0===t?void 0:t.code))throw new Error("Couldn't fetch keybase user avatar");return n.data.pic_url}))})),a.register("k6uFh",(function(t,n){e(t.exports,"useRecommendedValidators",(function(){return d}),(function(e){return d=e}));var r=a("4yY1D"),o=a("lNRH9"),i=a("57CUY"),s=a("bZPmb"),u=a("dI6X1"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const d=e=>{const t=s.stakingQueryKeys.recommendedValidators();return(0,o.useQuery)({enabled:!0,queryKey:t,cacheTime:u.CacheTime.Long,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return(0,i.getRecommendedValidators)(e())}))},onError(e){r.telemetry.captureError(e,r.FeatureTag.Staking)}})}})),a.register("57CUY",(function(t,n){e(t.exports,"getRecommendedValidators",(function(){return u}),(function(e){return u=e}));var r=a("8kIyR"),o=a("7rWiL"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch recommended staking validators.");function u(e){return i(this,void 0,void 0,(function*(){try{const t=yield r.rb.get(`${e}/staking/v1/recommended`);if(!(0,r.responseIsOkay)(t))throw s;const n=t.data;return o.RecommendedValidators.parse(n).validators}catch(e){throw s}}))}})),a.register("7rWiL",(function(t,n){e(t.exports,"StakeAccountType",(function(){return r})),e(t.exports,"StakeApy",(function(){return u})),e(t.exports,"RecommendedValidators",(function(){return c})),e(t.exports,"StakingRewardsHistory",(function(){return l})),e(t.exports,"LiquidStakingSupportedTokens",(function(){return k}));var r,o,i=a("belzv"),s=a("7pPsM");(o=r||(r={})).Initialized="initialized",o.Delegated="delegated";const u=s.z.object({apy:s.z.number()}),c=s.z.object({validators:s.z.array(s.z.string())}),d=s.z.object({epoch:s.z.number(),effectiveSlot:s.z.number(),amount:s.z.number(),postBalance:s.z.number(),percentChange:s.z.number(),apr:s.z.number(),timestamp:s.z.number()}),l=s.z.object({items:s.z.array(d)}),f=s.z.object({address:s.z.string(),chainId:i.NetworkID,decimals:s.z.number(),logoURI:s.z.string(),name:s.z.string(),symbol:s.z.string()}),p=s.z.object({caip19:s.z.string(),metadata:f}),y=s.z.object({vote_account:s.z.string()}),g=s.z.object({apy:s.z.string(),chainId:i.NetworkID,convertRatio:s.z.string(),name:s.z.string(),stakePoolAddress:s.z.string(),stakePoolTokenMetadata:p,validators:s.z.array(y)}),k=s.z.record(s.z.string(),s.z.array(g))})),a.register("dI6X1",(function(t,n){e(t.exports,"CacheTime",(function(){return o})),e(t.exports,"StaleTime",(function(){return s}));var r=a("4y59b");var o,i,s,u;(i=o||(o={}))[i.Always=1/0]="Always",i[i.Short=(0,r.toMilliseconds)({days:1})]="Short",i[i.Medium=(0,r.toMilliseconds)({days:3})]="Medium",i[i.Long=(0,r.toMilliseconds)({days:7})]="Long",(u=s||(s={}))[u.Immediate=0]="Immediate",u[u.Short=(0,r.toMilliseconds)({minutes:1})]="Short",u[u.Medium=(0,r.toMilliseconds)({minutes:2.5})]="Medium",u[u.Long=(0,r.toMilliseconds)({minutes:5})]="Long",u[u.Never=1/0]="Never"})),a.register("chsS5",(function(t,n){e(t.exports,"useSignatureStatus",(function(){return c}),(function(e){return c=e}));var r=a("lNRH9"),o=a("24sH7"),i=a("bZPmb"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const u=(e,t)=>s(void 0,void 0,void 0,(function*(){return yield e.getSignatureStatus(t,{searchTransactionHistory:!0})}));function c(e,t,n,a){var c;const d=i.stakingQueryKeys.signatureStatus(a),l=e.getQueryData(d),f=null===(c=null==l?void 0:l.value)||void 0===c?void 0:c.confirmationStatus,p=!!a&&"finalized"!==f;return(0,r.useQuery)({queryKey:d,queryFn:()=>s(this,void 0,void 0,(function*(){if(!a)throw o.MissingConfirmationSignatureError;return yield u(t,a)})),enabled:p,refetchInterval:n})}})),a.register("gt5rg",(function(t,n){e(t.exports,"useStakeAccountMinBalance",(function(){return c}),(function(e){return c=e}));var r=a("3fvLJ"),o=a("lNRH9"),i=a("bZPmb"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const u=e=>()=>s(void 0,void 0,void 0,(function*(){return yield e.getMinimumBalanceForRentExemption(r.StakeProgram.space)}));function c(e){const t=i.stakingQueryKeys.stakeAccountMinBalance(),n=u(e);return(0,o.useQuery)({queryKey:t,queryFn:n,placeholderData:0})}})),a.register("i6Kga",(function(t,n){e(t.exports,"useStakeAccounts",(function(){return f}),(function(e){return f=e}));var r=a("3fvLJ"),o=a("4yY1D"),i=a("lNRH9"),s=a("bZPmb"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const c=(e,t)=>u(void 0,void 0,void 0,(function*(){const n=[];t.ownerPublicKey&&n.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&n.push({dataSize:200},{memcmp:{offset:124,bytes:t.voteAccountPublicKey}});const a=yield e.getParsedProgramAccounts(r.StakeProgram.programId,{filters:n});let i=[];if(t.fetchInflationRewards)try{i=yield((e,t,n,...r)=>u(void 0,[e,t,n,...r],void 0,(function*(e,t,n,r="confirmed"){return yield e.getInflationReward(t,n,r)})))(e,a.map((({pubkey:e})=>e)))}catch(e){const t=e;!t.message.includes("RPC request timed out")&&o.telemetry.captureError(t,o.FeatureTag.Staking)}return a.map(((e,t)=>{var n;return Object.assign({pubkey:e.pubkey.toString(),lamports:e.account.lamports,inflationReward:null===(n=i[t])||void 0===n?void 0:n.amount},e.account.data.parsed)}))})),d=(e,t)=>s.stakingQueryKeys.stakeAccounts(e,t),l=(e,t)=>()=>c(e,{ownerPublicKey:t,fetchInflationRewards:!0});function f(e,t){const n=d(t,e.rpcEndpoint),r=l(e,t);return(0,i.useQuery)({queryKey:n,queryFn:r,placeholderData:[]})}})),a.register("fHWFb",(function(t,n){e(t.exports,"getStakeActivationData",(function(){return c}),(function(e){return c=e})),e(t.exports,"useStakeActivationData",(function(){return d}),(function(e){return d=e}));var r=a("3fvLJ"),o=a("lNRH9"),i=a("24sH7"),s=a("bZPmb"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const c=(e,t)=>e.getStakeActivation(new(0,r.PublicKey)(t));function d(e,t){const n=s.stakingQueryKeys.stakeActivationData(t),r=!!t;return(0,o.useQuery)({queryKey:n,queryFn:()=>u(this,void 0,void 0,(function*(){if(!t)throw i.MissingPublicKeyError;return yield c(e,t)})),enabled:r})}})),a.register("lxI2A",(function(t,n){e(t.exports,"useStakeApy",(function(){return d}),(function(e){return d=e}));var r=a("4yY1D"),o=a("lNRH9"),i=a("2efEo"),s=a("bZPmb"),u=a("dI6X1"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const d=e=>{const t=s.stakingQueryKeys.stakeApy();return(0,o.useQuery)({enabled:!0,queryKey:t,cacheTime:u.CacheTime.Short,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return(0,i.getStakingApy)(e())}))},onError(e){r.telemetry.captureError(e,r.FeatureTag.Staking)}})}})),a.register("2efEo",(function(t,n){e(t.exports,"getStakingApy",(function(){return u}),(function(e){return u=e}));var r=a("8kIyR"),o=a("7rWiL"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch staking APY");function u(e){return i(this,void 0,void 0,(function*(){try{const t=yield r.rb.get(`${e}/staking/v1/apy`);if(!(0,r.responseIsOkay)(t))throw s;const n=t.data;return o.StakeApy.parse(n).apy}catch(e){throw s}}))}})),a.register("aCG5w",(function(t,n){e(t.exports,"useStakeRewardsHistory",(function(){return d}),(function(e){return d=e}));var r=a("4yY1D"),o=a("tv9Be"),i=a("7yHq5"),s=a("bZPmb"),u=a("dI6X1"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};function d(e,t,n,a=2){const d=s.stakingQueryKeys.stakeRewardsHistory(t);return(0,o.useInfiniteQuery)({retry:a,enabled:!!t&&!!n,queryKey:d,cacheTime:u.CacheTime.Long,staleTime:u.StaleTime.Never,queryFn:r=>c(this,[r],void 0,(function*({pageParam:r}){const o=r?{address:t,chainId:n,epoch:r}:{address:t,chainId:n};return(0,i.getStakingRewardsHistory)(e(),o)})),getNextPageParam:({items:e})=>e.length?e[e.length-1].epoch:null,onError:e=>r.telemetry.captureError(e,r.FeatureTag.Staking)})}})),a.register("tv9Be",(function(t,n){e(t.exports,"useInfiniteQuery",(function(){return s}));var r=a("bUcw9"),o=a("23gDC"),i=a("fMZKM");function s(e,t,n){const a=(0,o.parseQueryArgs)(e,t,n);return(0,i.useBaseQuery)(a,r.InfiniteQueryObserver)}})),a.register("bUcw9",(function(t,n){e(t.exports,"InfiniteQueryObserver",(function(){return i}));var r=a("f4Jbh"),o=a("8dVOS");class i extends r.QueryObserver{bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,o.infiniteQueryBehavior)()},t)}getOptimisticResult(e){return e.behavior=(0,o.infiniteQueryBehavior)(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var n,r,a,i,s,u;const{state:c}=e;return{...super.createResult(e,t),fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,o.hasNextPage)(t,null==(n=c.data)?void 0:n.pages),hasPreviousPage:(0,o.hasPreviousPage)(t,null==(r=c.data)?void 0:r.pages),isFetchingNextPage:"fetching"===c.fetchStatus&&"forward"===(null==(a=c.fetchMeta)||null==(i=a.fetchMore)?void 0:i.direction),isFetchingPreviousPage:"fetching"===c.fetchStatus&&"backward"===(null==(s=c.fetchMeta)||null==(u=s.fetchMore)?void 0:u.direction)}}constructor(e,t){super(e,t)}}})),a.register("8dVOS",(function(t,n){function r(){return{onFetch:e=>{e.fetchFn=()=>{var t,n,r,i,s,u;const c=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,d=null==(r=e.fetchOptions)||null==(i=r.meta)?void 0:i.fetchMore,l=null==d?void 0:d.pageParam,f="forward"===(null==d?void 0:d.direction),p="backward"===(null==d?void 0:d.direction),y=(null==(s=e.state.data)?void 0:s.pages)||[],g=(null==(u=e.state.data)?void 0:u.pageParams)||[];let k=g,v=!1;const S=e.options.queryFn||(()=>Promise.reject("Missing queryFn")),h=(e,t,n,r)=>(k=r?[t,...k]:[...k,t],r?[n,...e]:[...e,n]),m=(t,n,r,o)=>{if(v)return Promise.reject("Cancelled");if(void 0===r&&!n&&t.length)return Promise.resolve(t);const a={queryKey:e.queryKey,pageParam:r,meta:e.meta};var i;i=a,Object.defineProperty(i,"signal",{enumerable:!0,get:()=>{var t,n;return null!=(t=e.signal)&&t.aborted?v=!0:null==(n=e.signal)||n.addEventListener("abort",(()=>{v=!0})),e.signal}});const s=S(a);return Promise.resolve(s).then((e=>h(t,r,e,o)))};let b;if(y.length)if(f){const t=void 0!==l,n=t?l:o(e.options,y);b=m(y,t,n)}else if(p){const t=void 0!==l,n=t?l:a(e.options,y);b=m(y,t,n,!0)}else{k=[];const t=void 0===e.options.getNextPageParam;b=!c||!y[0]||c(y[0],0,y)?m([],t,g[0]):Promise.resolve(h([],g[0],y[0]));for(let n=1;n<y.length;n++)b=b.then((r=>{if(!c||!y[n]||c(y[n],n,y)){const a=t?g[n]:o(e.options,r);return m(r,t,a)}return Promise.resolve(h(r,g[n],y[n]))}))}else b=m([]);return b.then((e=>({pages:e,pageParams:k})))}}}}function o(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function a(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}function i(e,t){if(e.getNextPageParam&&Array.isArray(t)){const n=o(e,t);return null!=n&&!1!==n}}function s(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){const n=a(e,t);return null!=n&&!1!==n}}e(t.exports,"infiniteQueryBehavior",(function(){return r})),e(t.exports,"hasNextPage",(function(){return i})),e(t.exports,"hasPreviousPage",(function(){return s}))})),a.register("7yHq5",(function(t,n){e(t.exports,"getStakingRewardsHistory",(function(){return u}),(function(e){return u=e}));var r=a("8kIyR"),o=a("7rWiL"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch staking rewards history");function u(e,t){return i(this,void 0,void 0,(function*(){let n;try{n=yield r.rb.post(`${e}/staking/v1/history`,t)}catch(e){throw s}if(!(0,r.responseIsOkay)(n))throw s;const a=n.data,i=o.StakingRewardsHistory.safeParse(a);if(i.success)return i.data;throw s}))}})),a.register("jRSxq",(function(t,n){e(t.exports,"useValidatorInfo",(function(){return c}),(function(e){return c=e}));var r=a("lNRH9"),o=a("islf0"),i=a("bZPmb"),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const u=e=>()=>s(void 0,void 0,void 0,(function*(){return(yield e.getParsedProgramAccounts(o.CONFIG_PROGRAM_ID)).reduce(((e,t)=>{var n;if("validatorInfo"!==(null===(n=t.account.data.parsed)||void 0===n?void 0:n.type))return e;const r=t.pubkey.toString(),o=t.account.data.parsed.info.keys,[,a]=o;if(!a.signer)return e;const i=a.pubkey,s=t.account.data.parsed.info.configData;return e.push({identityPubkey:i,infoPubkey:r,info:s}),e}),[])}));function c(e){const t=i.stakingQueryKeys.validatorInfo(),n=u(e);return(0,r.useQuery)({queryKey:t,queryFn:n,placeholderData:[]})}})),a.register("7hUpm",(function(t,n){e(t.exports,"useValidators",(function(){return c}),(function(e){return c=e}));var r=a("lDSNw"),o=a("kkkNB"),i=a("jRSxq"),s=a("dBN2w"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};function c(e){const{isFetched:t,isFetching:n,isLoading:a,isSuccess:c,isError:d,dataUpdatedAt:l,errorUpdatedAt:f,error:p,refetch:y,data:g}=(0,s.useVoteAccounts)(e),k=Math.max(l,f),{isFetched:v,isFetching:S,isLoading:h,isSuccess:m,isError:b,dataUpdatedAt:A,errorUpdatedAt:P,error:w,refetch:T,data:x}=(0,i.useValidatorInfo)(e),I=Math.max(A,P),C=Math.max(k,I),D=t&&v,E=n||S,N=c||m,L=d||b,O=p||w,M=a||h,R=(0,r.useCallback)((()=>u(this,void 0,void 0,(function*(){Promise.all([y(),T()])}))),[T,y]);return{results:(0,r.useMemo)((()=>{if(!g)return[];if(!x)return[];g.sort(o.voteAccountSorter);const e=new Map(g.map((e=>[e.identityPubkey,e]))),t=new Map(x.map((e=>[e.identityPubkey,e]))),n=[];for(const[r,o]of e){const e=t.get(r);n.push(Object.assign(Object.assign({},o),e))}return n}),[x,g]),dataUpdatedAt:C,error:O,isSuccess:N,isError:L,isFetched:D,isFetching:E,isLoading:M,refetch:R}}})),a.register("dBN2w",(function(t,n){e(t.exports,"useVoteAccounts",(function(){return u}),(function(e){return u=e}));var r=a("lNRH9"),o=a("bZPmb"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const s=e=>i(void 0,void 0,void 0,(function*(){const t=yield e.getVoteAccounts();return[...t.current,...t.delinquent].map((e=>({identityPubkey:e.nodePubkey,voteAccountPubkey:e.votePubkey,commission:e.commission,lastVote:e.lastVote,epochCredits:e.epochCredits,activatedStake:e.activatedStake}))).filter((e=>e.commission<99))}));function u(e){const t=o.stakingQueryKeys.voteAccounts(e.rpcEndpoint);return(0,r.useQuery)({queryKey:t,queryFn:()=>i(this,void 0,void 0,(function*(){return s(e)})),placeholderData:[]})}})),a.register("f2N2q",(function(t,n){e(t.exports,"useWithdrawStake",(function(){return y}),(function(e){return y=e}));var r=a("belzv"),o=a("lMzyG"),i=a("gd9Oy"),s=a("3fvLJ"),u=a("4yY1D"),c=a("4raQz"),d=a("fG04A"),l=a("24sH7");a("jqEmo");var f=a("kW76A"),p=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const y=(e,t,n,a,y)=>{const{t:g}=(0,o.useTranslation)(),{mutateAsync:k}=e.useSignAndSendSolanaTransactionAsync(t);return(0,d.useMutation)({mutationFn:e=>p(void 0,[e],void 0,(function*({accountIdentifier:e,senderAddress:n,stakePubkey:o,authorizedPubkey:u,amount:d}){if(!n)throw l.MissingSenderAddressError;const{networkID:f,address:p}=n,v=function({stakePubkey:e,authorizedPubkey:t,amount:n,transaction:r=new(0,s.Transaction)}){return r.add(s.StakeProgram.withdraw({stakePubkey:e,authorizedPubkey:t,toPubkey:t,lamports:n})),r}({stakePubkey:o,authorizedPubkey:u,amount:d}),S=yield a.addPriorityFee(v,{connection:t}),h={ownerAddress:null!=p?p:"",networkID:f,data:{signature:""},type:c.PendingTransactionType.WithdrawStake,display:{summary:{topLeft:{label:g("transactionsPendingWithdrawingStake")}}}};y.then((e=>e.approved({chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(f),type:"withdraw"})));const m=yield k({accountIdentifier:e,feePayer:new(0,s.PublicKey)(p),transaction:S,pendingTransactionInput:h});return y.then((e=>e.submittedTransaction(m,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(f),method:"signAndSendTransaction"}))),{networkID:f,id:null!=m?m:""}})),onSuccess:e=>{(0,c.waitForTransactionConfirmation)({connection:t,signature:e.id}).then((()=>{y.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"confirmed"}}))),(0,f.invalidateAllStakeAccountData)(n)()})).catch((t=>{y.then((t=>t.transactionStatus(e.id,{chainType:i.AddressType.Solana,chainName:r.Chain.Solana,networkId:r.Chains.getSolanaNetworkIDValue(e.networkID),status:{type:"error"}}))),u.telemetry.captureError(t,u.FeatureTag.Staking)}))}})}})),a.register("8wC6T",(function(t,n){e(t.exports,"useConvertStakeAccountListPageProps",(function(){return l}));var r=a("6Tvfa"),o=a("gd9Oy"),i=a("lDSNw"),s=a("ihFlu"),u=a("7hUpm");a("1rRmV");var c=a("3s5hF"),d=a("7rWiL");const l=({accountHooks:e,transactionHooks:t,navigateToReviewPage:n})=>{var r;const{connection:a}=t.useSelectedSolanaConnection(),{data:d}=e.useSelectedChainAddress(o.AddressType.Solana),{results:l,isFetched:p,isError:y}=(0,u.useValidators)(a),g=(0,i.useMemo)((()=>new Map(l.map((e=>[e.voteAccountPubkey,e])))),[l]),{data:k,isLoading:v}=(0,s.useConvertStakeAccountList)(a,null!==(r=null==d?void 0:d.address)&&void 0!==r?r:"",g,p||y),S=(0,i.useMemo)((()=>v||!k?[]:k.slice().map((e=>f(e,g))).sort(((e,t)=>e.lamports>t.lamports?-1:1))),[v,k,g]),h=(0,i.useMemo)((()=>S.filter((e=>e.eligible))),[S]),m=(0,i.useMemo)((()=>S.filter((e=>!e.eligible))),[S]),b=(0,c.useLiquidStakingStore)((e=>e.setConvertStakeAccount)),A=(0,i.useCallback)((e=>{var t,r,o,a,i,s,u,c;const d=null!==(a=null===(o=null===(r=null===(t=null==e?void 0:e.info)||void 0===t?void 0:t.stake)||void 0===r?void 0:r.delegation)||void 0===o?void 0:o.voter)&&void 0!==a?a:"",l=null!==(c=null===(u=null===(s=null===(i=null==e?void 0:e.info)||void 0===i?void 0:i.stake)||void 0===s?void 0:s.delegation)||void 0===u?void 0:u.stake)&&void 0!==c?c:"0";b({validatorVote:d,amount:l,stakeAccount:e.pubkey}),n()}),[n,b]);return{isLoading:v,eligibleStakeAccounts:h,inelegibleStakeAccounts:m,onSelectStakeAccount:A}},f=(e,t)=>{const n=p(e),r=y(e,t),o=g(e);return Object.assign(Object.assign({},e),{amount:o,eligible:n,title:r,imageUri:e.imageUri})},p=e=>e.type!==d.StakeAccountType.Initialized&&"active"===e.activationState,y=(e,t)=>{var n,o,a;let i="";if(e.type===d.StakeAccountType.Delegated){const{voter:s}=e.info.stake.delegation,u=t.get(s),c=null===(n=null==u?void 0:u.info)||void 0===n?void 0:n.keybaseUsername,d=null===(o=null==u?void 0:u.info)||void 0===o?void 0:o.name;i=null!==(a=null!=d?d:c)&&void 0!==a?a:(0,r.formatHashMedium)(s)}else e.type===d.StakeAccountType.Initialized&&(i=e.pubkey);return i},g=e=>{if(e.type===d.StakeAccountType.Initialized)return e.lamports;const{stake:t}=e.info.stake.delegation;return Number(t)}})),a.register("ihFlu",(function(t,n){e(t.exports,"useConvertStakeAccountList",(function(){return f}),(function(e){return f=e}));var r=a("3fvLJ"),o=a("lNRH9"),i=a("eXFbY"),s=a("bZPmb"),u=a("fHWFb"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const d=(e,t)=>s.stakingQueryKeys.convertStakeAccountList(e,t),l=(e,t,n)=>()=>((e,t,n)=>c(void 0,void 0,void 0,(function*(){const o=(e=>{const t=[];return e.ownerPublicKey&&t.push({memcmp:{offset:44,bytes:e.ownerPublicKey}}),e.voteAccountPublicKey&&t.push({dataSize:200},{memcmp:{offset:124,bytes:e.voteAccountPublicKey}}),t})(t),a=yield e.getParsedProgramAccounts(r.StakeProgram.programId,{filters:o}),s=(yield Promise.allSettled(a.map((t=>(0,u.getStakeActivationData)(e,t.pubkey.toString()))))).map((e=>{if("fulfilled"===e.status)return e.value.state})),c=(yield Promise.allSettled(a.map((e=>{var t,r,o;const a=null===(t=e.account.data.parsed.info)||void 0===t?void 0:t.stake.delegation.voter,s=n.get(a),u=null===(r=null==s?void 0:s.info)||void 0===r?void 0:r.keybaseUsername,c=null===(o=null==s?void 0:s.info)||void 0===o?void 0:o.iconUrl;return c?new Promise((e=>e(c))):u?(0,i.getKeybaseUserAvatar)(u):new Promise((e=>e(null)))})))).map((e=>{if("fulfilled"===e.status&&null!==e.value)return e.value}));return a.map(((e,t)=>Object.assign({pubkey:e.pubkey.toString(),lamports:e.account.lamports,activationState:s[t],imageUri:c[t]},e.account.data.parsed)))})))(e,{ownerPublicKey:t},n);function f(e,t,n,r=!0){const a=d(t,e.rpcEndpoint),i=l(e,t,n);return(0,o.useQuery)({queryKey:a,queryFn:i,enabled:!!t&&r})}})),a.register("1rRmV",(function(t,n){e(t.exports,"useLiquidStakingStore",(function(){return a("3s5hF").useLiquidStakingStore}));a("3s5hF")})),a.register("3s5hF",(function(n,r){e(n.exports,"useLiquidStakingStore",(function(){return s}));var o=a("9xrNA");const i={fungibleToStake:void 0,provider:void 0,convert:{validatorVote:"",stakeAccount:"",amount:""},eligibleAccountsCount:0,navigateTo:null},s=t(o)((e=>Object.assign(Object.assign({},i),{resetStaking:()=>e(i),setFungibleToStake:t=>e({fungibleToStake:t}),setProvider:t=>e({provider:t}),setConvertStakeAccount:t=>e({convert:t}),setEligibleAccountsCount:t=>e({eligibleAccountsCount:t}),setNavigateTo:t=>e({navigateTo:t})})))})),a.register("a8a7m",(function(t,n){e(t.exports,"useConvertStakeAccountReviewPageProps",(function(){return y}));var r=a("belzv"),o=a("gYh0e"),i=a("lMzyG"),s=a("gd9Oy"),u=a("a0t1u"),c=a("4y59b"),d=a("lDSNw");a("1rRmV");var l=a("3s5hF");const f=(e,t,n,a)=>{var s,d;if(!t||!n||!e)return null;const l=((e,t,n)=>{if(!t||!n||!e)return(0,c.BigNumber)(0);const r=new(0,c.BigNumber)(t.amount),o=new(0,c.BigNumber)(n.convertRatio);return(0,c.amountToUiAmount)(r,e.data.decimals).div(o)})(e,n,t),f=(0,u.extractPrice)(e,a),p=(null==f?void 0:f.usd)?l.multipliedBy(f.usd):l;return{amount:(0,u.formatTokenAmountGreaterThan1)(l),amountUsd:`$${(0,u.formatTokenAmountGreaterThan1)(p)}`,border:!1,network:{id:null!==(s=t.stakePoolTokenMetadata.metadata.chainId)&&void 0!==s?s:r.SolanaNetworkID.Mainnet,name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},logoUri:null!==(d=t.stakePoolTokenMetadata.metadata.logoURI)&&void 0!==d?d:null,symbol:t.stakePoolTokenMetadata.metadata.symbol,title:i.i18next.t("convertStakeReviewYouReceive"),tokenAddress:t.stakePoolTokenMetadata.metadata.address,tokenType:o.FungibleTokenType.SPL}},p=(e,t,n,r,a)=>{var s,l;const p=(0,d.useMemo)((()=>((e,t,n)=>{var r,a;if(!e||!t)return null;const s=(0,c.amountToUiAmount)(t.amount,e.data.decimals),d=(0,u.extractPrice)(e,n),l=(null==d?void 0:d.usd)?s.multipliedBy(d.usd):null;return{amount:(0,u.formatTokenAmountGreaterThan1)(s),amountUsd:l?`$${(0,u.formatTokenAmountGreaterThan1)(l)}`:"",border:!1,logoUri:null!==(r=e.data.logoUri)&&void 0!==r?r:null,network:{id:e.data.chain.id,name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},symbol:e.data.symbol,tokenAddress:e.data.tokenAddress,tokenType:null!==(a=e.type)&&void 0!==a?a:o.FungibleTokenType.SolanaNative,title:i.i18next.t("convertStakeReviewYouPay")}})(e,t,a)),[e,t,a]),y=(0,d.useMemo)((()=>f(e,n,t,a)),[e,n,t,a]),g=null!==(s=null==n?void 0:n.name)&&void 0!==s?s:"";return{payAsset:p,receiveAsset:y,account:null!==(l=null==r?void 0:r.address)&&void 0!==l?l:"",providerName:g,apy:void 0!==(null==n?void 0:n.apy)?(0,c.formatPercentage)(Number.parseFloat(n.apy)):"",networkFee:"",accountLabelText:i.i18next.t("stakeReviewAccount"),providerLabelText:i.i18next.t("convertStakeReviewProvider"),apyLabelText:i.i18next.t("stakeReviewAPY"),networkFeeLabelText:i.i18next.t("convertStakeReviewNetworkFee"),primaryButtonText:i.i18next.t("commandConvert")}},y=({accountHooks:e,priceHooks:t,navigateToStatusPage:n})=>{const a=(0,l.useLiquidStakingStore)((e=>e.fungibleToStake)),i=(0,l.useLiquidStakingStore)((e=>e.convert)),u=(0,l.useLiquidStakingStore)((e=>e.provider)),c=(0,d.useMemo)((()=>{var e;const t=[],n=a?(0,o.getFungibleCaip19FromFungible)(a):void 0,i=(0,r.decodeCaip19)(null!==(e=null==u?void 0:u.stakePoolTokenMetadata.caip19)&&void 0!==e?e:"");return n&&i&&(t.push(n),t.push(i)),{query:{data:t}}}),[a,u]),{data:f}=t.usePrices(c),{data:y}=e.useSelectedChainAddress(s.AddressType.Solana),g=p(a,i,u,y,f),k=(0,d.useCallback)((()=>{n()}),[n]);return Object.assign(Object.assign({},g),{onPrimaryButtonPress:k})}})),a.register("jkU7b",(function(t,n){e(t.exports,"useConvertStakeBannerProps",(function(){return c}));var r=a("lMzyG"),o=a("gd9Oy"),i=a("lDSNw"),s=a("i6Kga"),u=a("29xqG");const c=({fungible:e,accountHooks:t,transactionHooks:n,goToConvertStake:a,getApiEnvironment:c})=>{var d;const{connection:l}=n.useSelectedSolanaConnection(),{data:f}=t.useSelectedChainAddress(o.AddressType.Solana),{data:p=[],isLoading:y}=(0,s.useStakeAccounts)(l,null!==(d=null==f?void 0:f.address)&&void 0!==d?d:""),{isLoading:g,isSupported:k,initConvertStake:v}=(0,u.useLiquidStaking)(c,e),S=!(y||g)&&k&&p.length>0,h=(0,i.useCallback)((()=>{v(),a()}),[v,a]);return{title:r.i18next.t("convertStakeBannerTitle"),canConvertStake:S,onPress:h}}})),a.register("29xqG",(function(t,n){e(t.exports,"useLiquidStaking",(function(){return c}));var r=a("belzv"),o=a("gYh0e"),i=a("lDSNw"),s=a("3T103");a("1rRmV");var u=a("3s5hF");const c=(e,t)=>{const n=(0,u.useLiquidStakingStore)((e=>e.setProvider)),a=(0,u.useLiquidStakingStore)((e=>e.setFungibleToStake)),c=(0,i.useMemo)((()=>t?(0,r.encodeCaip19)((0,o.getFungibleCaip19FromFungible)(t)):""),[t]),{data:d={},isLoading:l}=(0,s.useLiquidStakingSupportedTokens)(e),f=d[c],p=(0,i.useCallback)((()=>{const e=f?f[0]:void 0;e&&t&&(a(t),n(e))}),[t,f,a,n]);return{isLoading:l,isSupported:(null==f?void 0:f.length)>0,providers:f,initConvertStake:p}}})),a.register("3T103",(function(t,n){e(t.exports,"useLiquidStakingSupportedTokens",(function(){return d}),(function(e){return d=e}));var r=a("4yY1D"),o=a("lNRH9"),i=a("lBXxP"),s=a("bZPmb"),u=a("dI6X1"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const d=e=>{const t=s.stakingQueryKeys.liquidStakingSupportedTokens(e());return(0,o.useQuery)({queryKey:t,cacheTime:u.CacheTime.Short,staleTime:u.StaleTime.Never,queryFn(){return c(this,void 0,void 0,(function*(){return yield(0,i.getLiquidStakingSupportedTokens)(e())}))},onError(e){r.telemetry.captureError(e,r.FeatureTag.Staking)}})}})),a.register("lBXxP",(function(t,n){e(t.exports,"getLiquidStakingSupportedTokens",(function(){return c}),(function(e){return c=e}));var r=a("8kIyR"),o=a("7rWiL"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const s=new Error("Failed to fetch liquid staking supported tokens"),u=new Error("Missing supported tokens in response");function c(e){return i(this,void 0,void 0,(function*(){try{const t=yield r.rb.get(`${e}/liquid-staking/v1/supported-tokens`);if(!(0,r.responseIsOkay)(t))throw s;const n=o.LiquidStakingSupportedTokens.safeParse(t.data.supportedTokens);if(!n.success)throw u;return n.data}catch(e){throw s}}))}})),a.register("02ODq",(function(t,n){e(t.exports,"useLiquidStakingStatusPageProps",(function(){return y}),(function(e){return y=e}));var r=a("gYh0e"),o=a("lMzyG"),i=a("4raQz"),s=a("lDSNw"),u=a("24sH7"),c=a("i6rfA");a("1rRmV");var d=a("3s5hF"),l=a("7cbu2"),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const p="https://www.jito.network/defi/";const y=({analytics:e,accountSigner:t,accountHooks:n,storage:a,legacyStorage:y,fungiblesSdk:g,transactionHooks:k,queryClient:v,getApiEnvironment:S,dismissConvertFlow:h,goToConvertAccountList:m})=>{var b,A,P;const{t:w}=(0,o.useTranslation)(),[T,x]=(0,s.useState)("loading"),[I,C]=(0,s.useState)(),[D,E]=(0,s.useState)(),N=(0,d.useLiquidStakingStore)((e=>e.fungibleToStake)),L=(0,d.useLiquidStakingStore)((e=>e.provider)),O=(0,d.useLiquidStakingStore)((e=>e.convert)),M=(0,d.useLiquidStakingStore)((e=>e.eligibleAccountsCount)),R=(0,d.useLiquidStakingStore)((e=>e.resetStaking)),K=(0,d.useLiquidStakingStore)((e=>e.setNavigateTo)),F=null!==(b=null==N?void 0:N.data.symbol)&&void 0!==b?b:"",z=null!==(A=null==L?void 0:L.stakePoolTokenMetadata.metadata.symbol)&&void 0!==A?A:"",{data:q,isLoading:_}=n.useSelectedMultiChainAccount(),V=null!==(P=null==q?void 0:q.identifier)&&void 0!==P?P:"",H=(0,s.useMemo)((()=>{var e,t;const n=(null!==(e=null==q?void 0:q.addresses)&&void 0!==e?e:[]).find((e=>e.networkID===(null==N?void 0:N.data.chain.id)));return null!==(t=null==n?void 0:n.address)&&void 0!==t?t:""}),[null==N?void 0:N.data.chain.id,null==q?void 0:q.addresses]),{fungible:U,isLoadingTokens:W}=(0,r.useGetFungibleBalance)({key:(null==L?void 0:L.stakePoolTokenMetadata.metadata.address)||"",analytics:e,sdk:g,getApiEnvironment:S,storage:a,legacyStorage:y,accountHooks:n,transactionHooks:k,queryClient:v}),B=U?(0,r.parseOwnerAddress)(U):void 0,{connection:j}=(0,i.useSelectedSolanaConnection)(n),{mutateAsync:G}=(0,c.useConvertStakeAccount)({accountSigner:t,connection:j,storage:a}),Q=(0,s.useMemo)((()=>({topLeft:{label:w("convertStakePendingTitle",{symbol:z})}})),[z,w]),Y=!_||!W,Z=(0,s.useCallback)((()=>f(void 0,void 0,void 0,(function*(){if(!L)throw new(0,u.StakingError)(u.StakingErrorCodes.NoProviderError);if(!O)throw new(0,u.StakingError)(u.StakingErrorCodes.NoConvertDetailsError);try{const e=yield G({stakePoolAddress:L.stakePoolAddress,accountIdentifier:V,ownerAddress:H,validatorVoteAddress:O.validatorVote,stakeAccountAddress:O.stakeAccount,poolTokenAccountAddress:B,pendingConvertStakeActivityRow:Q});C(e)}catch(e){const t=(0,l.parseStakingError)(e);E(t)}}))),[V,O,G,H,Q,B,L]),{isSuccess:J,isError:X,error:$}=k.useWaitForTransactionConfirmation(R,I);(0,s.useEffect)((()=>{J?x("confirmed"):X&&(x("error"),E($))}),[J,X,$,I]);const ee=(0,s.useCallback)((()=>{var e;if(!I||X)return h();K(U?{screen:"FungibleDetail",type:U.type,networkID:U.data.chain.id,fungibleKey:U.data.key,name:null!==(e=U.data.name)&&void 0!==e?e:""}:{screen:"Activity"}),h()}),[I,X,U,h,K]),te=(0,s.useMemo)((()=>function({stakedTokenSymbol:e,poolTokenSymbol:t,txHash:n,txError:r,confirmationStatus:o,eligibleAccountsCount:a,onDismiss:i,onConvertMore:s,t:u}){return r?{type:"error",title:u("convertStakeStatusErrorTitle"),message:u("convertStakeStatusErrorMessage",{poolTokenSymbol:t}),txHash:n,txHashTitle:u("commandViewTransaction"),button:{title:u("commandClose"),onPress:i}}:"confirmed"===o?{type:"success",title:u("convertStakeStatusSuccessTitle",{poolTokenSymbol:t}),learnMoreLink:p,txHash:n,txHashTitle:u("commandViewTransaction"),continueButton:a>1?{title:u("convertStakeStatusConvertMore"),onPress:s}:void 0,closeButton:{title:u("commandClose"),onPress:i}}:{type:"loading",title:u("convertStakeStatusLoadingTitle",{poolTokenSymbol:t}),message:u("convertStakeStatusLoadingMessage",{stakedTokenSymbol:e,poolTokenSymbol:t}),txHash:n,txHashTitle:u("commandViewTransaction"),button:{title:u("commandClose"),onPress:i}}}({stakedTokenSymbol:F,poolTokenSymbol:z,txHash:null==I?void 0:I.id,txError:D,confirmationStatus:T,eligibleAccountsCount:M,onDismiss:ee,onConvertMore:m,t:w})),[F,z,null==I?void 0:I.id,D,T,M,ee,m,w]);return{isReadyToExecute:Y,statusPageProps:te,executeConvertStake:Z}}})),a.register("i6rfA",(function(t,n){e(t.exports,"useConvertStakeAccount",(function(){return d}),(function(e){return d=e}));var r=a("belzv"),o=a("3fvLJ"),i=a("4raQz"),s=a("fG04A");a("2UpVW");var u=a("kR509"),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const d=({accountSigner:e,connection:t,storage:n})=>(0,s.useMutation)({mutationFn:a=>c(void 0,[a],void 0,(function*({stakePoolAddress:a,accountIdentifier:s,ownerAddress:c,validatorVoteAddress:d,stakeAccountAddress:l,poolTokenAccountAddress:f,pendingConvertStakeActivityRow:p}){const{transaction:y,signers:g}=yield(0,u.getConvertStakeAccountTransaction)({connection:t,stakePoolAddress:a,ownerAddress:c,validatorVoteAddress:d,stakeAccountAddress:l,poolTokenAccountAddress:f}),k={ownerAddress:c,networkID:r.Chains.solana.mainnetID,data:{signature:""},type:i.PendingTransactionType.ConvertStake,display:{summary:p}};return{id:yield(0,i.signAndSendSolanaTransactionAsync)({accountIdentifier:s,feePayer:new(0,o.PublicKey)(c),connection:t,accountSigner:e,transaction:y,pendingTransactionInput:k,storage:n,opts:{additionalSignerAccounts:g}}),networkID:r.Chains.solana.mainnetID}}))})})),a.register("2UpVW",(function(t,n){e(t.exports,"getConvertStakeAccountTransaction",(function(){return a("kR509").getConvertStakeAccountTransaction}));a("kR509")})),a.register("kR509",(function(t,n){e(t.exports,"getConvertStakeAccountTransaction",(function(){return s}),(function(e){return s=e}));var r=a("3fvLJ"),o=a("cqMZT"),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};const s=e=>i(void 0,[e],void 0,(function*({connection:e,stakePoolAddress:t,ownerAddress:n,validatorVoteAddress:a,stakeAccountAddress:i,poolTokenAccountAddress:s}){const u=new(0,r.PublicKey)(t),c=new(0,r.PublicKey)(n),d=new(0,r.PublicKey)(a),l=new(0,r.PublicKey)(i),f=s?new(0,r.PublicKey)(s):void 0,{instructions:p,signers:y}=yield(0,o.depositStake)(e,u,c,d,l,f),g=(yield e.getLatestBlockhash("confirmed")).blockhash;return{transaction:new(0,r.VersionedTransaction)(new(0,r.TransactionMessage)({instructions:p,payerKey:c,recentBlockhash:g}).compileToV0Message()),signers:y}}))})),a.register("cqMZT",(function(n,r){e(n.exports,"depositStake",(function(){return k}),(function(e){return k=e}));var o=a("3fvLJ"),i=a("5Py8w"),s=a("8Xw9B"),u=a("iC8Bj"),c=a("53ZRU"),d=a("gUNka"),l=a("20p3V"),f=a("6rT8n").Buffer,p=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))};function y(e,t){return p(this,void 0,void 0,(function*(){const n=yield e.getAccountInfo(t);if(!n)throw new Error("Invalid stake pool account");return{pubkey:t,account:{data:l.StakePoolLayout.decode(n.data),executable:n.executable,lamports:n.lamports,owner:n.owner}}}))}function g(e,t){return p(this,void 0,void 0,(function*(){const[n]=yield o.PublicKey.findProgramAddress([t.toBuffer(),f.from("withdraw")],e);return n}))}function k(e,n,r,a,l,k){return p(this,void 0,void 0,(function*(){const v=yield y(e,n),S=yield g(c.STAKE_POOL_PROGRAM_ID,n),h=yield function(e,n,r,a){return p(this,void 0,void 0,(function*(){const[i]=yield o.PublicKey.findProgramAddress([n.toBuffer(),r.toBuffer(),a?new(t(u))(a).toArrayLike(f,"le",4):f.alloc(0)],e);return i}))}(c.STAKE_POOL_PROGRAM_ID,a,n),m=[],b=v.account.data.poolMint;if(!k){const e=(0,s.getAssociatedTokenAddressSync)(b,r);m.push((0,i.createAssociatedTokenAccountIdempotentInstruction)(r,e,r,b)),k=e}return m.push(...o.StakeProgram.authorize({stakePubkey:l,authorizedPubkey:r,newAuthorizedPubkey:v.account.data.stakeDepositAuthority,stakeAuthorizationType:o.StakeAuthorizationLayout.Staker}).instructions),m.push(...o.StakeProgram.authorize({stakePubkey:l,authorizedPubkey:r,newAuthorizedPubkey:v.account.data.stakeDepositAuthority,stakeAuthorizationType:o.StakeAuthorizationLayout.Withdrawer}).instructions),m.push(d.StakePoolInstruction.depositStake({stakePool:n,validatorList:v.account.data.validatorList,depositAuthority:v.account.data.stakeDepositAuthority,reserveStake:v.account.data.reserveStake,managerFeeAccount:v.account.data.managerFeeAccount,referralPoolAccount:k,destinationPoolAccount:k,withdrawAuthority:S,depositStake:l,validatorStake:h,poolMint:b})),{instructions:m,signers:[]}}))}})),a.register("5Py8w",(function(t,n){e(t.exports,"createAssociatedTokenAccountInstruction",(function(){return s})),e(t.exports,"createAssociatedTokenAccountIdempotentInstruction",(function(){return u}));var r=a("csgS8"),o=a("kd2w2"),i=a("6rT8n").Buffer;function s(e,t,n,r,a=o.TOKEN_PROGRAM_ID,s=o.ASSOCIATED_TOKEN_PROGRAM_ID){return c(e,t,n,r,i.alloc(0),a,s)}function u(e,t,n,r,a=o.TOKEN_PROGRAM_ID,s=o.ASSOCIATED_TOKEN_PROGRAM_ID){return c(e,t,n,r,i.from([1]),a,s)}function c(e,t,n,a,i,s=o.TOKEN_PROGRAM_ID,u=o.ASSOCIATED_TOKEN_PROGRAM_ID){const c=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:r.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new(0,r.TransactionInstruction)({keys:c,programId:u,data:i})}})),a.register("53ZRU",(function(t,n){e(t.exports,"STAKE_POOL_PROGRAM_ID",(function(){return r}));const r=new(0,a("3fvLJ").PublicKey)("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy")})),a.register("gUNka",(function(t,n){e(t.exports,"StakePoolInstruction",(function(){return d}));var r=a("3fvLJ"),o=a("kd2w2"),i=a("53ZRU"),s=a("6rT8n").Buffer;const u=Object.freeze({DepositStake:{index:9,layout:r.BufferLayout.struct([r.BufferLayout.u8("instruction")])},DepositSol:{index:14,layout:r.BufferLayout.struct([r.BufferLayout.u8("instruction"),r.BufferLayout.ns64("lamports")])}});function c(e,t){const n=e.layout.span,r=s.alloc(n),o=Object.assign({instruction:e.index},t);return e.layout.encode(o,r),r}class d{static depositStake(e){const{stakePool:t,validatorList:n,depositAuthority:a,withdrawAuthority:s,depositStake:d,validatorStake:l,reserveStake:f,destinationPoolAccount:p,managerFeeAccount:y,referralPoolAccount:g,poolMint:k}=e,v=c(u.DepositStake),S=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:r.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:r.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:o.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:r.StakeProgram.programId,isSigner:!1,isWritable:!1}];return new(0,r.TransactionInstruction)({programId:i.STAKE_POOL_PROGRAM_ID,keys:S,data:v})}static depositSol(e){const{stakePool:t,withdrawAuthority:n,depositAuthority:a,reserveStake:s,fundingAccount:d,destinationPoolAccount:l,managerFeeAccount:f,referralPoolAccount:p,poolMint:y,lamports:g}=e,k=c(u.DepositSol,{lamports:g}),v=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:r.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:o.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}];return a&&v.push({pubkey:a,isSigner:!0,isWritable:!1}),new(0,r.TransactionInstruction)({programId:i.STAKE_POOL_PROGRAM_ID,keys:v,data:k})}}})),a.register("20p3V",(function(t,n){e(t.exports,"StakePoolLayout",(function(){return i}));var r=a("fSwrH");const o=[(0,r.u64)("denominator"),(0,r.u64)("numerator")],i=(0,r.struct)([(0,r.u8)("accountType"),(0,r.publicKey)("manager"),(0,r.publicKey)("staker"),(0,r.publicKey)("stakeDepositAuthority"),(0,r.u8)("stakeWithdrawBumpSeed"),(0,r.publicKey)("validatorList"),(0,r.publicKey)("reserveStake"),(0,r.publicKey)("poolMint"),(0,r.publicKey)("managerFeeAccount"),(0,r.publicKey)("tokenProgramId"),(0,r.u64)("totalLamports"),(0,r.u64)("poolTokenSupply"),(0,r.u64)("lastUpdateEpoch"),(0,r.struct)([(0,r.u64)("unixTimestamp"),(0,r.u64)("epoch"),(0,r.publicKey)("custodian")],"lockup"),(0,r.struct)(o,"epochFee"),(0,r.option)((0,r.struct)(o),"nextEpochFee"),(0,r.option)((0,r.publicKey)(),"preferredDepositValidatorVoteAddress"),(0,r.option)((0,r.publicKey)(),"preferredWithdrawValidatorVoteAddress"),(0,r.struct)(o,"stakeDepositFee"),(0,r.struct)(o,"stakeWithdrawalFee"),(0,r.option)((0,r.struct)(o),"nextStakeWithdrawalFee"),(0,r.u8)("stakeReferralFee"),(0,r.option)((0,r.publicKey)(),"solDepositAuthority"),(0,r.struct)(o,"solDepositFee"),(0,r.u8)("solReferralFee"),(0,r.option)((0,r.publicKey)(),"solWithdrawAuthority"),(0,r.struct)(o,"solWithdrawalFee"),(0,r.option)((0,r.struct)(o),"nextSolWithdrawalFee"),(0,r.u64)("lastEpochPoolTokenSupply"),(0,r.u64)("lastEpochTotalLamports")])})),a.register("fSwrH",(function(e,t){var n=a("6rT8n").Buffer,r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.map=e.exports.array=e.exports.rustEnum=e.exports.str=e.exports.vecU8=e.exports.tagged=e.exports.vec=e.exports.bool=e.exports.option=e.exports.publicKey=e.exports.i256=e.exports.u256=e.exports.i128=e.exports.u128=e.exports.i64=e.exports.u64=e.exports.struct=e.exports.f64=e.exports.f32=e.exports.i32=e.exports.u32=e.exports.i16=e.exports.u16=e.exports.i8=e.exports.u8=void 0;var o=a("hpPIR"),i=a("csgS8");const s=r(a("iC8Bj"));o=a("hpPIR");Object.defineProperty(e.exports,"u8",{enumerable:!0,get:function(){return o.u8}}),Object.defineProperty(e.exports,"i8",{enumerable:!0,get:function(){return o.s8}}),Object.defineProperty(e.exports,"u16",{enumerable:!0,get:function(){return o.u16}}),Object.defineProperty(e.exports,"i16",{enumerable:!0,get:function(){return o.s16}}),Object.defineProperty(e.exports,"u32",{enumerable:!0,get:function(){return o.u32}}),Object.defineProperty(e.exports,"i32",{enumerable:!0,get:function(){return o.s32}}),Object.defineProperty(e.exports,"f32",{enumerable:!0,get:function(){return o.f32}}),Object.defineProperty(e.exports,"f64",{enumerable:!0,get:function(){return o.f64}}),Object.defineProperty(e.exports,"struct",{enumerable:!0,get:function(){return o.struct}});class u extends o.Layout{decode(e,t=0){const n=new s.default(this.blob.decode(e,t),10,"le");return this.signed?n.fromTwos(8*this.span).clone():n}encode(e,t,r=0){return this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(n,"le",this.span),t,r)}constructor(e,t,n){super(e,n),this.blob=(0,o.blob)(e),this.signed=t}}function c(e){return new u(8,!1,e)}e.exports.u64=c,e.exports.i64=function(e){return new u(8,!0,e)},e.exports.u128=function(e){return new u(16,!1,e)},e.exports.i128=function(e){return new u(16,!0,e)},e.exports.u256=function(e){return new u(32,!1,e)},e.exports.i256=function(e){return new u(32,!0,e)};class d extends o.Layout{decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}constructor(e,t,n,r){super(e.span,r),this.layout=e,this.decoder=t,this.encoder=n}}e.exports.publicKey=function(e){return new d((0,o.blob)(32),(e=>new i.PublicKey(e)),(e=>e.toBuffer()),e)};class l extends o.Layout{encode(e,t,n=0){return null==e?this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+1)+1)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return null;if(1===n)return this.layout.decode(e,t+1);throw new Error("Invalid option "+this.property)}getSpan(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return 1;if(1===n)return this.layout.getSpan(e,t+1)+1;throw new Error("Invalid option "+this.property)}constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(0,o.u8)()}}function f(e){if(0===e)return!1;if(1===e)return!0;throw new Error("Invalid bool: "+e)}function p(e){return e?1:0}function y(e){const t=(0,o.u32)("length"),n=(0,o.struct)([t,(0,o.blob)((0,o.offset)(t,-t.span),"data")]);return new d(n,(({data:e})=>e),(e=>({data:e})),e)}e.exports.option=function(e,t){return new l(e,t)},e.exports.bool=function(e){return new d((0,o.u8)(),f,p,e)},e.exports.vec=function(e,t){const n=(0,o.u32)("length"),r=(0,o.struct)([n,(0,o.seq)(e,(0,o.offset)(n,-n.span),"values")]);return new d(r,(({values:e})=>e),(e=>({values:e})),t)},e.exports.tagged=function(e,t,n){const r=(0,o.struct)([c("tag"),t.replicate("data")]);return new d(r,(function({tag:t,data:n}){if(!t.eq(e))throw new Error("Invalid tag, expected: "+e.toString("hex")+", got: "+t.toString("hex"));return n}),(t=>({tag:e,data:t})),n)},e.exports.vecU8=y,e.exports.str=function(e){return new d(y(),(e=>e.toString("utf-8")),(e=>n.from(e,"utf-8")),e)},e.exports.rustEnum=function(e,t,n){const r=(0,o.union)(null!=n?n:(0,o.u8)(),t);return e.forEach(((e,t)=>r.addVariant(t,e,e.property))),r},e.exports.array=function(e,t,n){const r=(0,o.struct)([(0,o.seq)(e,t,"values")]);return new d(r,(({values:e})=>e),(e=>({values:e})),n)};class g extends o.Layout{decode(e,t){t=t||0;return[this.keyLayout.decode(e,t),this.valueLayout.decode(e,t+this.keyLayout.getSpan(e,t))]}encode(e,t,n){n=n||0;const r=this.keyLayout.encode(e[0],t,n);return r+this.valueLayout.encode(e[1],t,n+r)}getSpan(e,t){return this.keyLayout.getSpan(e,t)+this.valueLayout.getSpan(e,t)}constructor(e,t,n){super(e.span+t.span,n),this.keyLayout=e,this.valueLayout=t}}e.exports.map=function(e,t,n){const r=(0,o.u32)("length"),a=(0,o.struct)([r,(0,o.seq)(new g(e,t),(0,o.offset)(r,-r.span),"values")]);return new d(a,(({values:e})=>new Map(e)),(e=>({values:Array.from(e.entries())})),n)}})),a.register("7cbu2",(function(t,n){e(t.exports,"parseStakingError",(function(){return o}));var r=a("24sH7");function o(e){return e instanceof r.StakingError?e:new(0,r.StakingError)(r.StakingErrorCodes.UnknownError)}})),a.register("hdx8w",(function(t,n){e(t.exports,"useNativeLiquidStaking",(function(){return i}));var r=a("islf0"),o=a("29xqG");const i=(e,t)=>{const n=r.NETWORK_TO_NATIVE_FUNGIBLE.get(t);return(0,o.useLiquidStaking)(e,n)}})),a.register("k2NbH",(function(t,n){e(t.exports,"createStakeAnalytics",(function(){return i}));var r=a("9ktGj");const o={type:"fungible",isNativeOfType:"sol",chain:a("belzv").Chain.Solana,name:"Solana",symbol:"SOL",iconUrl:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",decimals:9},i=e=>new s(e,"stake");class s extends r.SequenceAnalytics{constructor(){super(...arguments),this.createStakeAccountAndDelegateStake=e=>{this.analytics.capture("createStakeAccountAndDelegateStake",{data:Object.assign(Object.assign({},e),o)})},this.deactivateStake=()=>{this.analytics.capture("deactivateStake",{data:Object.assign({},o)})}}}})),a.register("cBz6V",(function(t,n){e(t.exports,"useGetMaxTransferrableSol",(function(){return u}));var r=a("3fvLJ"),o=a("4raQz"),i=a("4y59b"),s=a("brdGs");const u=({balance:e,cluster:t,rentExemptionMinimum:n})=>{const{data:a}=(0,o.useNetworkFeeSolana)(t),u=(0,s.getMaxTransferrableSol)({numSignatures:11,lamportsPerSignature:a,lamportBalance:(0,i.BigNumber)(e),rentExemptionMinimum:(0,r.solanaToLamports)(n)});return parseFloat((0,r.lamportsToSolana)(u).toFixed(9))}})),a.register("brdGs",(function(n,r){e(n.exports,"getMaxTransferrableSol",(function(){return i}));var o=a("3yHS8");const i=({numSignatures:e,lamportsPerSignature:n,lamportBalance:r,rentExemptionMinimum:a})=>{const i=t(o)(n).multipliedBy(e),s=r.minus(i);return t(o).max(s.minus(a),0)}})),a.register("hvGDb",(function(t,n){e(t.exports,"stakingShouldDehydrateQueryPredicate",(function(){return o}));const r=[a("bZPmb").LIQUID_STAKING_QUERY_KEYS_PREFIX.supportedTokens],o=e=>{const t=String(e.queryKey[1]);return r.includes(t)}}));
//# sourceMappingURL=staking.037c2788.js.map
define=__define;})(window.define);